## Android

### é¡¹ç›®ç»“æ„

![](ç¬¬ä¸€è¡Œä»£ç -0/image-20240418170648281.png)

1. `.gradle`å’Œ`.idea`ï¼šæ”¾ç½®çš„éƒ½æ˜¯Android Studioè‡ªåŠ¨ç”Ÿæˆçš„ä¸€äº›æ–‡ä»¶
2. app é¡¹ç›®ä¸­çš„ä»£ç ã€èµ„æºç­‰å†…å®¹éƒ½æ˜¯æ”¾ç½®åœ¨è¿™ä¸ªç›®å½•ä¸‹çš„
   1. ![](ç¬¬ä¸€è¡Œä»£ç -0/image-20240418171120501.png)
   2. buildï¼šè¿™ä¸ªç›®å½•å’Œå¤–å±‚çš„buildç›®å½•ç±»ä¼¼ï¼ŒåŒ…å«äº†ä¸€äº›åœ¨ç¼–è¯‘æ—¶è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶
   3. libsï¼šå¦‚æœé¡¹ç›®ä¸­ä½¿ç”¨åˆ°äº†ç¬¬ä¸‰æ–¹jaråŒ…ï¼Œå°±éœ€è¦æŠŠè¿™äº›jaråŒ…éƒ½æ”¾åœ¨libsç›®å½•ä¸‹ï¼Œæ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹çš„jaråŒ…ä¼šè¢«è‡ªåŠ¨æ·»åŠ åˆ°é¡¹ç›®çš„æ„å»ºè·¯å¾„é‡Œ
   4. androidTestï¼šç¼–å†™Android Testæµ‹è¯•ç”¨ä¾‹çš„ï¼Œå¯ä»¥å¯¹é¡¹ç›®è¿›è¡Œä¸€äº›è‡ªåŠ¨åŒ–æµ‹è¯•
   5. javaï¼šæ”¾ç½®æ‰€æœ‰Javaä»£ç ï¼ˆKotlinä»£ç ä¹Ÿæ”¾åœ¨è¿™é‡Œï¼‰
   6. resï¼šåœ¨é¡¹ç›®ä¸­ä½¿ç”¨åˆ°çš„æ‰€æœ‰å›¾ç‰‡ã€å¸ƒå±€ã€å­—ç¬¦ä¸²ç­‰èµ„æºéƒ½è¦å­˜æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚å½“ç„¶è¿™ä¸ªç›®å½•ä¸‹è¿˜æœ‰å¾ˆå¤šå­ç›®å½•ï¼Œå›¾ç‰‡æ”¾åœ¨drawable ç›®å½•ä¸‹ï¼Œå¸ƒå±€æ”¾åœ¨layoutç›®å½•ä¸‹ï¼Œå­—ç¬¦ä¸²æ”¾åœ¨valuesç›®å½•ä¸‹ï¼Œæ‰€ä»¥ä½ ä¸ç”¨æ‹…å¿ƒä¼šæŠŠæ•´ä¸ªres ç›®å½•å¼„å¾—ä¹±ç³Ÿç³Ÿçš„
   7. AndroidManifest.xmlï¼šæ•´ä¸ªAndroidé¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œä½ åœ¨ç¨‹åºä¸­å®šä¹‰çš„æ‰€æœ‰å››å¤§ç»„ä»¶éƒ½éœ€è¦åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œæ³¨å†Œï¼Œå¦å¤–è¿˜å¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ç»™åº”ç”¨ç¨‹åºæ·»åŠ æƒé™å£°æ˜ã€‚
   8. testï¼šç¼–å†™Unit Testæµ‹è¯•ç”¨ä¾‹çš„ï¼Œæ˜¯å¯¹é¡¹ç›®è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•çš„å¦ä¸€ç§æ–¹å¼
   9. .gitignoreï¼šå°†appæ¨¡å—å†…æŒ‡å®šçš„ç›®å½•æˆ–æ–‡ä»¶æ’é™¤åœ¨ç‰ˆæœ¬æ§åˆ¶ä¹‹å¤–ï¼Œä½œç”¨å’Œå¤–å±‚çš„.gitignoreæ–‡ä»¶ç±»ä¼¼
   10. app.imlï¼šIntelliJ IDEAé¡¹ç›®è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶
   11. build.gradleï¼šappæ¨¡å—çš„gradleæ„å»ºè„šæœ¬ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­ä¼šæŒ‡å®šå¾ˆå¤šé¡¹ç›®æ„å»ºç›¸å…³çš„é…ç½®
   12. proguard-rules.pro ï¼šæŒ‡å®šé¡¹ç›®ä»£ç çš„æ··æ·†è§„åˆ™ï¼Œå½“ä»£ç å¼€å‘å®Œæˆåæ‰“åŒ…æˆå®‰è£…åŒ…æ–‡ä»¶ï¼Œå¦‚æœä¸å¸Œæœ›ä»£ç è¢«åˆ«äººç ´è§£ï¼Œé€šå¸¸ä¼šå°†ä»£ç è¿›è¡Œæ··æ·†ï¼Œä»è€Œè®©ç ´è§£è€…éš¾ä»¥é˜…è¯»
3. buildï¼šä¸»è¦åŒ…å«äº†ä¸€äº›åœ¨ç¼–è¯‘æ—¶è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶
4. gradleï¼šåŒ…å«äº†gradle wrapperçš„é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨gradle wrapperçš„æ–¹å¼ä¸éœ€è¦æå‰å°†gradleä¸‹è½½å¥½ï¼Œè€Œæ˜¯ä¼šè‡ªåŠ¨æ ¹æ®æœ¬åœ°çš„ç¼“å­˜æƒ…å†µå†³å®šæ˜¯å¦éœ€è¦è”ç½‘ä¸‹è½½gradleã€‚
   1. Android Studioé»˜è®¤å°±æ˜¯å¯ç”¨gradle wrapperæ–¹å¼çš„ï¼Œå¦‚æœéœ€è¦æ›´æ”¹æˆç¦»çº¿æ¨¡å¼ï¼Œå¯ç‚¹å‡»`Android Studioå¯¼èˆªæ â†’Fileâ†’Settingsâ†’Build, Execution, Deploymentâ†’Gradle`ï¼Œè¿›è¡Œé…ç½®æ›´æ”¹ã€‚ 
5. .gitignoreï¼šå°†æŒ‡å®šçš„ç›®å½•æˆ–æ–‡ä»¶æ’é™¤åœ¨ç‰ˆæœ¬æ§åˆ¶ä¹‹å¤–çš„ã€‚
6. build.gradleï¼šé¡¹ç›®å…¨å±€çš„gradleæ„å»ºè„šæœ¬ï¼Œé€šå¸¸ä¸éœ€è¦ä¿®æ”¹
7. gradle.propertiesï¼šå…¨å±€çš„gradleé…ç½®æ–‡ä»¶ï¼Œåœ¨è¿™é‡Œé…ç½®çš„å±æ€§å°†ä¼šå½±å“åˆ°é¡¹ç›®ä¸­æ‰€æœ‰çš„gradleç¼–è¯‘è„šæœ¬
8. gradlewå’Œgradlew.batï¼šç”¨æ¥åœ¨å‘½ä»¤è¡Œç•Œé¢ä¸­æ‰§è¡Œgradleå‘½ä»¤çš„ï¼Œå…¶ä¸­gradlewæ˜¯åœ¨Linuxæˆ–Macç³»ç»Ÿä¸­ä½¿ç”¨çš„ï¼Œgradlew.batæ˜¯åœ¨Windowsç³»ç»Ÿä¸­ä½¿ç”¨çš„ã€‚
9. HelloWorld.imlï¼šimlæ–‡ä»¶æ˜¯æ‰€æœ‰IntelliJ IDEAé¡¹ç›®éƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆçš„ä¸€ä¸ªæ–‡ä»¶ï¼ˆAndroid Studioæ˜¯åŸºäºIntelliJ IDEAå¼€å‘çš„ï¼‰ï¼Œç”¨äºæ ‡è¯†è¿™æ˜¯ä¸€ä¸ªIntelliJ IDEAé¡¹ç›®
10. local.propertiesï¼šç”¨äºæŒ‡å®šæœ¬æœºä¸­çš„Android SDKè·¯å¾„ï¼Œä¸éœ€è¦ä¿®æ”¹ï¼Œé™¤éæœ¬æœºä¸­çš„Android SDKä½ç½®å‘ç”Ÿäº†å˜åŒ–ï¼Œé‚£ä¹ˆå°†è¿™ä¸ªæ–‡ä»¶ä¸­çš„è·¯å¾„æ”¹æˆæ–°çš„ä½ç½®å³å¯
11. settings.gradleï¼šç”¨äºæŒ‡å®šé¡¹ç›®ä¸­æ‰€æœ‰å¼•å…¥çš„æ¨¡å—ã€‚

#### AndroidManifest.xml

æ²¡æœ‰åœ¨AndroidManifest.xmlé‡Œæ³¨å†Œçš„Activityæ˜¯ä¸èƒ½ä½¿ç”¨çš„ã€‚

```xml
<activity android:name=".MainActivity">
    <intent-filter>
        <!-- è¡¨ç¤ºMainActivityæ˜¯è¿™ä¸ªé¡¹ç›®çš„ä¸»Activity -->
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
```

#### res

```xml
<!-- res/values/strings.xml -->
<resources>
    <string name="app_name">HelloWorld</string>
</resources>
```

è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªåº”ç”¨ç¨‹åºåçš„å­—ç¬¦ä¸²ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ¥å¼•ç”¨å®ƒ

1. åœ¨ä»£ç ä¸­é€šè¿‡`R.string.app_name`å¯ä»¥è·å¾—è¯¥å­—ç¬¦ä¸²çš„å¼•ç”¨
2. åœ¨XMLä¸­é€šè¿‡`@string/app_name`å¯ä»¥è·å¾—è¯¥å­—ç¬¦ä¸²çš„å¼•ç”¨

## Kotlin

### å˜é‡

valï¼ˆvalueçš„ç®€å†™ï¼‰ç”¨æ¥å£°æ˜ä¸€ä¸ªä¸å¯å˜çš„å˜é‡ï¼Œè¿™ç§å˜é‡åœ¨åˆå§‹èµ‹å€¼ä¹‹åå°±å†ä¹Ÿä¸èƒ½é‡æ–°èµ‹å€¼ï¼Œå¯¹åº”Javaä¸­çš„finalå˜é‡ã€‚

varï¼ˆvariableçš„ç®€å†™ï¼‰ç”¨æ¥å£°æ˜ä¸€ä¸ªå¯å˜çš„å˜é‡ï¼Œè¿™ç§å˜é‡åœ¨åˆå§‹èµ‹å€¼ä¹‹åä»ç„¶å¯ä»¥å†è¢«é‡æ–°èµ‹å€¼ï¼Œå¯¹åº”Javaä¸­çš„éfinalå˜é‡ã€‚

Kotlinçš„ç±»å‹æ¨å¯¼æœºåˆ¶å¹¶ä¸æ€»æ˜¯å¯ä»¥æ­£å¸¸å·¥ä½œçš„ï¼Œæ¯”å¦‚è¯´å¦‚æœå¯¹ä¸€ä¸ªå˜é‡å»¶è¿Ÿèµ‹å€¼çš„è¯ï¼ŒKotlinå°±æ— æ³•è‡ªåŠ¨æ¨å¯¼å®ƒçš„ç±»å‹äº†ã€‚

```kotlin
val a = 10

// æ˜¾å¼å£°æ˜
val a: Int = 10
```

### å‡½æ•°

```kotlin
fun methodName(param1: Int, param2: Int): Int {
    return 0
}
```

å½“ä¸€ä¸ªå‡½æ•°ä¸­åªæœ‰ä¸€è¡Œä»£ç æ—¶ï¼ŒKotlinå…è®¸ä¸ç¼–å†™å‡½æ•°ä½“ï¼Œå¯ä»¥ç›´æ¥å°†å”¯ä¸€çš„ä¸€è¡Œä»£ç å†™åœ¨å‡½æ•°å®šä¹‰çš„å°¾éƒ¨ï¼Œä¸­é—´ç”¨ç­‰å·è¿æ¥å³å¯ã€‚

```kotlin
fun largerNumber(num1: Int, num2: Int): Int = max(num1, num2)
fun largerNumber(num1: Int, num2: Int) = max(num1, num2)
```

ç»™å‡½æ•°è®¾å®šå‚æ•°é»˜è®¤å€¼

```kotlin
fun printParams(num: Int, str: String = "hello") {
    println("num is $num , str is $str")
}
```

Kotlinå¯ä»¥é€šè¿‡é”®å€¼å¯¹çš„æ–¹å¼æ¥ä¼ å‚ï¼Œä»è€Œä¸å¿…åƒä¼ ç»Ÿå†™æ³•é‚£æ ·æŒ‰ç…§å‚æ•°å®šä¹‰çš„é¡ºåºæ¥ä¼ å‚ã€‚

### ä¿®é¥°ç¬¦

| ä¿®é¥°ç¬¦    | Java                               | Kotlin             |
| --------- | ---------------------------------- | ------------------ |
| public    | æ‰€æœ‰ç±»å¯è§                         | æ‰€æœ‰ç±»å¯è§ï¼ˆé»˜è®¤ï¼‰ |
| private   | å½“å‰ç±»å¯è§                         | å½“å‰ç±»å¯è§         |
| protected | å½“å‰ç±»ã€å­ç±»ã€åŒä¸€åŒ…è·¯å¾„ä¸‹çš„ç±»å¯è§ | å½“å‰ç±»ã€å­ç±»å¯è§   |
| default   | åŒä¸€åŒ…è·¯å¾„ä¸‹çš„ç±»å¯è§ï¼ˆé»˜è®¤ï¼‰       | æ—                  |
| internal  | æ—                                  | åŒä¸€æ¨¡å—ä¸­çš„ç±»å¯è§ |

### é€»è¾‘æ§åˆ¶

#### if

```kotlin
fun largerNumber(num1: Int, num2: Int): Int {
    var value = 0
    if (num1 > num2) {
        value = num1
    } else {
        value = num2
    }
    return value
}

// Kotlinä¸­çš„ifè¯­å¥æ˜¯å¯ä»¥æœ‰è¿”å›å€¼çš„ï¼Œè¿”å›å€¼å°±æ˜¯ifè¯­å¥æ¯ä¸€ä¸ªæ¡ä»¶ä¸­æœ€åä¸€è¡Œä»£ç çš„è¿”å›å€¼
fun largerNumber(num1: Int, num2: Int): Int {
    val value = if (num1 > num2) {
        num1
    } else {
        num2
    }
    return value
}
fun largerNumber(num1: Int, num2: Int) = if (num1 > num2) num1 else num2
```

#### when

```kotlin
// åŒ¹é…å€¼ -> { æ‰§è¡Œé€»è¾‘ }
fun getScore(name: String) = when (name) {
    "Tom" -> 86
    "Jim" -> 77
    "Jack" -> 95
    "Lily" -> 100
    else -> 0
}
fun checkNumber(num: Number) {
    when (num) {
        is Int -> println("number is Int")
        is Double -> println("number is Double")
        else -> println("number not support")
    }
}

```

#### for

```kotlin
val range = 0..10 // è¡¨ç¤ºä¸€ä¸ªåŒºé—´[0, 10]ã€‚
val range = 0 until 10 // [0, 10) 

// é€’å¢
for (i in 0 until 10 step 2) {
    println(i)
}

// é™åº
for (i in 10 downTo 1) {
    println(i)
}

```

### class

```kotlin
class Person {
    var name = ""
    var age = 0
    fun eat() {
        println(name + " is eating. He is " + age + " years old.")
    }
}
```

classé»˜è®¤æ— æ³•ç»§æ‰¿ï¼Œé¡»æ·»åŠ `open`æ‰å¯ç»§æ‰¿ã€‚

```kotlin
open class Person {
    ...
}
class Student : Person() {
    var sno = ""
    var grade = 0
}
```

#### ä¸»æ„é€ å‡½æ•°

æ¯ä¸ªç±»é»˜è®¤éƒ½ä¼šæœ‰ä¸€ä¸ªä¸å¸¦å‚æ•°çš„ä¸»æ„é€ å‡½æ•°ï¼Œä¸»æ„é€ å‡½æ•°çš„ç‰¹ç‚¹æ˜¯æ²¡æœ‰å‡½æ•°ä½“ï¼Œç›´æ¥å®šä¹‰åœ¨ç±»åçš„åé¢å³å¯ã€‚

```Kotlin
class Student(val sno: String, val grade: Int) : Person() {}
```

ä¸»æ„é€ å‡½æ•°æ²¡æœ‰å‡½æ•°ä½“ï¼ŒKotlinæä¾›äº†ä¸€ä¸ª`init`ç»“æ„ä½“ï¼Œæ‰€æœ‰ä¸»æ„é€ å‡½æ•°ä¸­çš„é€»è¾‘éƒ½å¯ä»¥å†™åœ¨é‡Œé¢

```kotlin
class Student(val sno: String, val grade: Int) : Person() {
    init {
        println("sno is " + sno)
        println("grade is " + grade)
    }
}
```

æ ¹æ®ç»§æ‰¿ç‰¹æ€§çš„è§„å®šï¼Œå­ç±»çš„æ„é€ å‡½æ•°å¿…é¡»è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚

```kotlin
class Student(val sno: String, val grade: Int, name: String, age: Int) :
    Person(name, age) {
        ...
}
```

#### æ¬¡æ„é€ å‡½æ•°

ä»»ä½•ä¸€ä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªä¸»æ„é€ å‡½æ•°ï¼Œä½†æ˜¯å¯ä»¥æœ‰å¤šä¸ªæ¬¡æ„é€ å‡½æ•°ã€‚

æ¬¡æ„é€ å‡½æ•°ä¹Ÿå¯ä»¥ç”¨äºå®ä¾‹åŒ–ä¸€ä¸ªç±»ï¼Œè¿™ä¸€ç‚¹å’Œä¸»æ„é€ å‡½æ•°æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼Œåªä¸è¿‡å®ƒæ˜¯æœ‰å‡½æ•°ä½“çš„ã€‚ 

Kotlinè§„å®šï¼Œå½“ä¸€ä¸ªç±»æ—¢æœ‰ä¸»æ„é€ å‡½æ•°åˆæœ‰æ¬¡æ„é€ å‡½æ•°æ—¶ï¼Œæ‰€æœ‰çš„æ¬¡æ„é€ å‡½æ•°éƒ½å¿…é¡»è°ƒç”¨ä¸»æ„é€ å‡½æ•°ï¼ˆåŒ…æ‹¬é—´æ¥è°ƒç”¨ï¼‰ã€‚

```kotlin
class Student(val sno: String, val grade: Int, name: String, age: Int) :
    Person(name, age) {
        constructor(name: String, age: Int) : this("", 0, name, age) {
        }
        constructor() : this("", 0) {
        }
}
```

æ¬¡æ„é€ å‡½æ•°æ˜¯é€šè¿‡`constructor`å…³é”®å­—æ¥å®šä¹‰çš„ï¼Œè¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªæ¬¡æ„é€ å‡½æ•°ï¼šç¬¬ä¸€ä¸ªæ¬¡æ„é€ å‡½æ•°æ¥æ”¶`name`å’Œ`age`å‚æ•°ï¼Œç„¶åå®ƒåˆé€šè¿‡`this`å…³é”®å­—è°ƒç”¨äº†ä¸»æ„é€ å‡½æ•°ï¼Œå¹¶å°†`sno`å’Œ `grade`è¿™ä¸¤ä¸ªå‚æ•°èµ‹å€¼æˆåˆå§‹å€¼ï¼›ç¬¬äºŒä¸ªæ¬¡æ„é€ å‡½æ•°ä¸æ¥æ”¶ä»»ä½•å‚æ•°ï¼Œå®ƒé€šè¿‡`this`å…³é”®å­—è°ƒç”¨ äº†æˆ‘ä»¬åˆšæ‰å®šä¹‰çš„ç¬¬ä¸€ä¸ªæ¬¡æ„é€ å‡½æ•°ï¼Œå¹¶å°†`name`å’Œ`age`å‚æ•°ä¹Ÿèµ‹å€¼æˆåˆå§‹å€¼ã€‚

#### æ•°æ®ç±»

åœ¨ä¸€ä¸ªè§„èŒƒçš„ç³»ç»Ÿæ¶æ„ä¸­ï¼Œæ•°æ®ç±»é€šå¸¸å æ®ç€éå¸¸é‡è¦çš„è§’è‰²ï¼Œå®ƒä»¬ç”¨äºå°†æœåŠ¡å™¨ç«¯æˆ–æ•°æ®åº“ä¸­çš„æ•°æ®æ˜ å°„åˆ°å†…å­˜ä¸­ï¼Œä¸ºç¼–ç¨‹é€»è¾‘æä¾›æ•°æ®æ¨¡å‹çš„æ”¯æŒã€‚

å½“åœ¨ä¸€ä¸ªç±»å‰é¢å£°æ˜äº†dataå…³é”®å­—æ—¶ï¼Œå°±è¡¨æ˜è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªæ•°æ®ç±»ï¼ŒKotlinä¼šæ ¹æ®ä¸»æ„é€ å‡½æ•°ä¸­çš„å‚æ•°å°†equals()ã€hashCode()ã€toString()ç­‰å›ºå®šä¸”æ— å®é™…é€»è¾‘æ„ä¹‰çš„æ–¹æ³•è‡ªåŠ¨ç”Ÿæˆï¼Œä»è€Œå¤§å¤§å‡å°‘äº†å¼€å‘çš„å·¥ä½œé‡ã€‚

```kotlin
data class Cellphone(val brand: String, val price: Double)
```

#### å•ä¾‹ç±»

å•ä¾‹æ¨¡å¼æ˜¯æœ€å¸¸ç”¨ã€æœ€åŸºç¡€çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œå®ƒå¯ä»¥ç”¨äºé¿å…åˆ›å»ºé‡å¤çš„å¯¹è±¡ï¼Œæ¯”å¦‚æŸä¸ªç±»åœ¨å…¨å±€æœ€å¤šåªèƒ½æ‹¥æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨å•ä¾‹æ¨¡å¼ã€‚

Javaçš„å•ä¾‹æ¨¡å¼çš„å†™æ³•ï¼š

> é¦–å…ˆä¸ºäº†ç¦æ­¢å¤–éƒ¨åˆ›å»ºSingletonçš„å®ä¾‹ï¼Œæˆ‘ä»¬éœ€è¦ç”¨privateå…³é”®å­—å°†Singletonçš„æ„é€ å‡½æ•°ç§æœ‰åŒ–ï¼Œç„¶åç»™å¤–éƒ¨æä¾›äº†ä¸€ä¸ªgetInstance()é™æ€æ–¹æ³•ç”¨äºè·å–Singletonçš„å®ä¾‹ã€‚åœ¨getInstance()æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åˆ¤æ–­å¦‚æœå½“å‰ç¼“å­˜çš„Singletonå®ä¾‹ä¸ºnullï¼Œå°±åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œå¦åˆ™ç›´æ¥è¿”å›ç¼“å­˜çš„å®ä¾‹å³å¯ï¼Œè¿™å°±æ˜¯å•ä¾‹æ¨¡å¼çš„å·¥ä½œæœºåˆ¶ã€‚

```Java
public class Singleton {
    private static Singleton instance;
    private Singleton() {}
    public synchronized static Singleton getInstance() {
        if (instance == null) {
            instance = new Singleton();
        }
        return instance;
    }
    public void singletonTest() {
        System.out.println("singletonTest is called.");
    }
}
```

Kotlinçš„å†™æ³•ï¼šï¼ˆä½¿ç”¨`object`å…³é”®å­—ï¼‰
```Kotlin
object Singleton {
    fun singletonTest() {
        println("singletonTest is called.")
    }
}
// è°ƒç”¨
Singleton.singletonTest()
```

å®Kotlinåœ¨èƒŒåè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªSingletonç±»çš„å®ä¾‹ï¼Œå¹¶ä¸”ä¿è¯å…¨å±€åªä¼šå­˜åœ¨ä¸€ä¸ªSingletonå®ä¾‹ã€‚

#### å¯†å°ç±»

å½“åœ¨`when`è¯­å¥ä¸­ä¼ å…¥ä¸€ä¸ªå¯†å°ç±»å˜é‡ä½œä¸ºæ¡ä»¶æ—¶ï¼ŒKotlinç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ£€æŸ¥è¯¥å¯†å°ç±»æœ‰å“ªäº›å­ç±»ï¼Œå¹¶å¼ºåˆ¶è¦æ±‚ä½ å°†æ¯ä¸€ä¸ªå­ç±»æ‰€å¯¹åº”çš„æ¡ä»¶å…¨éƒ¨å¤„ç†ã€‚è¿™æ ·å°±å¯ä»¥ä¿è¯ï¼Œå³ä½¿æ²¡æœ‰ç¼–å†™`else`æ¡ä»¶ï¼Œä¹Ÿä¸å¯èƒ½ä¼šå‡ºç°æ¼å†™æ¡ä»¶åˆ†æ”¯çš„æƒ…å†µã€‚

```kotlin
sealed class Result
class Success(val msg: String) : Result()
class Failure(val error: Exception) : Result()

// å¯ç¼–è¯‘çš„
fun getResultMsg(result: Result) = when (result) {
    is Success -> result.msg
    is Failure -> "Error is ${result.error.message}"
}
```



### æ¥å£

```kotlin
interface Study {
    fun readBooks() // å…è®¸æœ‰é»˜è®¤å®ç°
    fun doHomework()
}
class Student(name: String, age: Int) : Person(name, age), Study {
    override fun readBooks() {
        println(name + " is reading.")
    }
    www.blogss.cn
    override fun doHomework() {
        println(name + " is doing homework.")
    }
}
```

### Lambdaç¼–ç¨‹

#### é›†åˆ

1. Listé›†åˆ
   1. `listOf`
      1. `val list = listOf("Apple", "Banana", "Orange", "Pear")`
      2. ä¸å¯å˜é›†åˆï¼Œåªå¯è¯»å–
   2. `mutableListof`
      1. å¯å˜é›†åˆ
2. Seté›†åˆ
   1. `setOf`ã€`mutableSetOf`
   2. ä¸å¯å­˜æ”¾é‡å¤å…ƒç´ 
3. Mapé›†åˆ
   1. `map["Apple"] = 1`
   2. `val number = map["Apple"]`
   3. `val map = mapOf("Apple" to 1, "Banana" to 2, "Orange" to 3)`

#### é›†åˆçš„å‡½æ•°API

1. maxByï¼š``
2. filterï¼š``
3. mapï¼š``
4. anyï¼š
   1. `list.any { it.length <= 5 }`
   2. æ˜¯å¦è‡³å°‘å­˜åœ¨ä¸€ä¸ªå…ƒç´ æ»¡è¶³æŒ‡å®šæ¡ä»¶
5. allï¼š
   1. `list.all { it.length <= 5 }`
   2. æ˜¯å¦æ‰€æœ‰å…ƒç´ éƒ½æ»¡è¶³æŒ‡å®šæ¡ä»¶

#### Lambdaè¯­æ³•ç»“æ„

```kotlin
{å‚æ•°å1: å‚æ•°ç±»å‹, å‚æ•°å2: å‚æ•°ç±»å‹ -> å‡½æ•°ä½“}
```

å‡½æ•°ä½“ä¸­å¯ä»¥ç¼–å†™ä»»æ„è¡Œä»£ç 

æœ€åä¸€è¡Œä»£ç ä¼šè‡ªåŠ¨ä½œä¸ºLambdaè¡¨è¾¾å¼çš„è¿”å›å€¼

```kotlin
val list = listOf("Apple", "Banana", "Orange", "Pear", "Grape")

val lambda = { fruit: String -> fruit.length }
val maxLengthFruit = list.maxBy(lambda)

// å¯ä»¥ç›´æ¥å°†lambdaè¡¨è¾¾å¼ä¼ å…¥maxByå‡½æ•°
val maxLengthFruit = list.maxBy({ fruit: String -> fruit.length })

// å½“Lambdaå‚æ•°æ˜¯å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æ—¶ï¼Œå¯ä»¥å°†Lambdaè¡¨è¾¾å¼ç§»åˆ°å‡½æ•°æ‹¬å·çš„å¤–é¢
val maxLengthFruit = list.maxBy() { fruit: String -> fruit.length }

// å¦‚æœLambdaå‚æ•°æ˜¯å‡½æ•°çš„å”¯ä¸€ä¸€ä¸ªå‚æ•°çš„è¯ï¼Œè¿˜å¯ä»¥å°†å‡½æ•°çš„æ‹¬å·çœç•¥
val maxLengthFruit = list.maxBy { fruit: String -> fruit.length }

// Lambdaè¡¨è¾¾å¼ä¸­çš„å‚æ•°åˆ—è¡¨å…¶å®åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸å¿…å£°æ˜å‚æ•°ç±»å‹
val maxLengthFruit = list.maxBy { fruit -> fruit.length }

// å½“Lambdaè¡¨è¾¾å¼çš„å‚æ•°åˆ—è¡¨ä¸­åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶ï¼Œä¹Ÿä¸å¿…å£°æ˜å‚æ•°åï¼Œè€Œæ˜¯å¯ä»¥ä½¿ç”¨itå…³é”®å­—æ¥ä»£æ›¿
val maxLengthFruit = list.maxBy { it.length }
```

```kotlin
// ä¿ç•™5ä¸ªå­—æ¯ä»¥å†…çš„æ°´æœ
fun main() {
    val list = listOf("Apple", "Banana", "Orange", "Pear", "Grape")
    val newList = list.filter { it.length <= 5 }
    				.map { it.toUpperCase() }
}
```

#### Javaå‡½æ•°å¼APIçš„ä½¿ç”¨

å¦‚æœåœ¨Kotlinä»£ç ä¸­è°ƒç”¨äº†ä¸€ä¸ªJavaæ–¹æ³•ï¼Œå¹¶ä¸”è¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªJavaå•æŠ½è±¡æ–¹æ³•æ¥å£å‚æ•°ï¼Œå°±å¯ä»¥ä½¿ç”¨å‡½æ•°å¼APIã€‚

Javaå•æŠ½è±¡æ–¹æ³•æ¥å£æŒ‡çš„æ˜¯æ¥å£ä¸­åªæœ‰ä¸€ä¸ªå¾…å®ç°æ–¹æ³•ï¼Œå¦‚æœæ¥å£ä¸­æœ‰å¤šä¸ªå¾…å®ç°æ–¹æ³•ï¼Œåˆ™æ— æ³•ä½¿ç”¨å‡½æ•°å¼APIã€‚

```kotlin
Thread(object : Runnable {
    override fun run() {
        println("Thread is running")
    }
}).start()

// å› ä¸ºRunnableç±»ä¸­åªæœ‰ä¸€ä¸ªå¾…å®ç°æ–¹æ³•ï¼Œå³ä½¿è¿™é‡Œæ²¡æœ‰æ˜¾å¼åœ°é‡å†™run()æ–¹æ³•ï¼ŒKotlinä¹Ÿèƒ½è‡ªåŠ¨æ˜ç™½Runnableåé¢çš„Lambdaè¡¨è¾¾å¼å°±æ˜¯è¦åœ¨run()æ–¹æ³•ä¸­å®ç°çš„å†…å®¹ã€‚
Thread(Runnable {
    println("Thread is running")
}).start()

// å¦‚æœä¸€ä¸ªJavaæ–¹æ³•çš„å‚æ•°åˆ—è¡¨ä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªJavaå•æŠ½è±¡æ–¹æ³•æ¥å£å‚æ•°ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°†æ¥å£åè¿›è¡Œçœç•¥
Thread({
    println("Thread is running")
}).start()
// å½“Lambdaè¡¨è¾¾å¼æ˜¯æ–¹æ³•çš„æœ€åä¸€ä¸ªå‚æ•°æ—¶ï¼Œå¯ä»¥å°†Lambdaè¡¨è¾¾å¼ç§»åˆ°æ–¹æ³•æ‹¬å·çš„å¤–é¢
// å¦‚æœLambdaè¡¨è¾¾å¼è¿˜æ˜¯æ–¹æ³•çš„å”¯ä¸€ä¸€ä¸ªå‚æ•°ï¼Œè¿˜å¯ä»¥å°†æ–¹æ³•çš„æ‹¬å·çœç•¥
Thread {
    println("Thread is running")
}.start()
```

### æ ‡å‡†å‡½æ•°

#### let

`let`æä¾›äº†å‡½æ•°å¼APIçš„ç¼–ç¨‹æ¥å£ï¼Œå¹¶å°†åŸå§‹è°ƒç”¨å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’åˆ°`Lambda`è¡¨è¾¾å¼ä¸­ã€‚

```kotlin
obj.let { obj2 ->
	// ç¼–å†™å…·ä½“çš„ä¸šåŠ¡é€»è¾‘
}
```

è¿™é‡Œè°ƒç”¨äº†`obj`å¯¹è±¡çš„`let`å‡½æ•°ï¼Œç„¶å`Lambda`è¡¨è¾¾å¼ä¸­çš„ä»£ç å°±ä¼šç«‹å³æ‰§è¡Œï¼Œå¹¶ä¸”è¿™ä¸ª`obj`å¯¹è±¡æœ¬èº«è¿˜ä¼šä½œä¸ºå‚æ•°ä¼ é€’åˆ°`Lambda`è¡¨è¾¾å¼ä¸­ã€‚ä¸è¿‡ï¼Œä¸ºäº†é˜²æ­¢å˜é‡é‡åï¼Œè¿™é‡Œå°†å‚æ•°åæ”¹æˆäº†`obj2`ï¼Œä½†å®é™…ä¸Šå®ƒä»¬æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚

#### with

- withå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š
  - ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªä»»æ„ç±»å‹çš„å¯¹è±¡
  - ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªLambdaè¡¨è¾¾å¼
- withå‡½æ•°ä¼šåœ¨Lambdaè¡¨è¾¾å¼ä¸­æä¾›ç¬¬ä¸€ä¸ªå‚æ•°å¯¹è±¡çš„ä¸Šä¸‹æ–‡ï¼Œå¹¶ä½¿ç”¨Lambdaè¡¨è¾¾å¼ä¸­çš„æœ€åä¸€è¡Œä»£ç ä½œä¸ºè¿”å›å€¼è¿”å›ã€‚

```kotlin
// æ— with
val list = listOf("Apple", "Banana", "Orange", "Pear", "Grape")
val builder = StringBuilder()
builder.append("Start eating fruits.\n")
for (fruit in list) {
    builder.append(fruit).append("\n")
}
builder.append("Ate all fruits.")
val result = builder.toString()
println(result)

// æœ‰with
val list = listOf("Apple", "Banana", "Orange", "Pear", "Grape")
val result = with(StringBuilder()) {
    append("Start eating fruits.\n")
    for (fruit in list) {
        append(fruit).append("\n")
    }
    append("Ate all fruits.")
    toString()
}
println(result)
```

#### run

- runå‡½æ•°é€šå¸¸ä¸ä¼šç›´æ¥è°ƒç”¨ï¼Œè€Œæ˜¯è¦åœ¨æŸä¸ªå¯¹è±¡çš„åŸºç¡€ä¸Šè°ƒç”¨
- runå‡½æ•°åªæ¥æ”¶ä¸€ä¸ªLambdaå‚æ•°ï¼Œå¹¶ä¸”ä¼šåœ¨Lambdaè¡¨è¾¾å¼ä¸­æä¾›è°ƒç”¨å¯¹è±¡çš„ä¸Šä¸‹æ–‡
- å…¶ä»–æ–¹é¢å’Œwithå‡½æ•°æ˜¯ä¸€æ ·çš„ï¼ŒåŒ…æ‹¬ä¹Ÿä¼šä½¿ç”¨Lambdaè¡¨è¾¾å¼ä¸­çš„æœ€åä¸€è¡Œä»£ç ä½œä¸ºè¿”å›å€¼è¿”å›

```kotlin
val list = listOf("Apple", "Banana", "Orange", "Pear", "Grape")
val result = StringBuilder().run {
    append("Start eating fruits.\n")
    for (fruit in list) {
        append(fruit).append("\n")
    }
    append("Ate all fruits.")
    toString()
}
println(result)
```

#### apply

- applyå‡½æ•°è¦åœ¨æŸä¸ªå¯¹è±¡ä¸Šè°ƒç”¨ï¼Œå¹¶ä¸”åªæ¥æ”¶ä¸€ä¸ªLambdaå‚æ•°
- applyåœ¨Lambdaè¡¨è¾¾å¼ä¸­æä¾›è°ƒç”¨å¯¹è±¡çš„ä¸Šä¸‹æ–‡
- applyå‡½æ•°æ— æ³•æŒ‡å®šè¿”å›å€¼ï¼Œè€Œæ˜¯ä¼šè‡ªåŠ¨è¿”å›è°ƒç”¨å¯¹è±¡æœ¬èº«

```kotlin
val list = listOf("Apple", "Banana", "Orange", "Pear", "Grape")
val result = StringBuilder().apply {
    append("Start eating fruits.\n")
    for (fruit in list) {
        append(fruit).append("\n")
    }
    append("Ate all fruits.")
}
println(result.toString())
```

### ç©ºæŒ‡é’ˆæ£€æŸ¥

Kotliné»˜è®¤æ‰€æœ‰çš„å‚æ•°å’Œå˜é‡éƒ½ä¸å¯ä¸ºç©ºï¼ŒKotlinå°†ç©ºæŒ‡é’ˆå¼‚å¸¸çš„æ£€æŸ¥æå‰åˆ°äº†ç¼–è¯‘æ—¶æœŸï¼Œå¦‚æœç¨‹åºå­˜åœ¨ç©ºæŒ‡é’ˆå¼‚å¸¸çš„é£é™©ï¼Œé‚£ä¹ˆåœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šç›´æ¥æŠ¥é”™ï¼Œä¿®æ­£ä¹‹åæ‰èƒ½æˆåŠŸè¿è¡Œã€‚

å¯ä¸ºç©ºçš„ç±»å‹ç³»ç»Ÿï¼šåœ¨ç±»åçš„åé¢åŠ ä¸Šä¸€ä¸ªé—®å·

æ¯”å¦‚ï¼Œ`Int`è¡¨ç¤ºä¸å¯ä¸ºç©ºçš„æ•´å‹ï¼Œè€Œ`Int?`å°±è¡¨ç¤ºå¯ä¸ºç©ºçš„æ•´å‹ï¼›`String`è¡¨ç¤ºä¸å¯ä¸ºç©ºçš„å­—ç¬¦ä¸²ï¼Œè€Œ`String?`å°±è¡¨ç¤ºå¯ä¸ºç©ºçš„å­—ç¬¦ä¸²ã€‚

åˆ¤æ–­éç©ºï¼š

```kotlin
if (a != null) {
    a.doSomething()
}
// ç®€åŒ–
a?.doSomething()

// æ›´å¥½çš„æ–¹æ³•
fun doStudy(study: Study?) {
    study?.let { stu ->
		stu.readBooks()
		stu.doHomework()
    }
}

val c = if (a ! = null) {
    a
} else {
    b
}
// ç®€åŒ–
val c = a ?: b
```

å¤–éƒ¨å·²ç»å¯¹å˜é‡è¿›è¡Œäº†éç©ºæ£€æŸ¥ï¼Œåœ¨è°ƒç”¨æ–¹æ³•æ—¶ï¼Œè¿˜è®¤ä¸ºè¿™é‡Œå­˜åœ¨ç©ºæŒ‡é’ˆé£é™©ï¼Œä»è€Œæ— æ³•ç¼–è¯‘é€šè¿‡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæƒ³è¦å¼ºè¡Œé€šè¿‡ç¼–è¯‘ï¼Œå¯ä»¥ä½¿ç”¨éç©ºæ–­è¨€å·¥å…·ï¼Œå†™æ³•æ˜¯åœ¨å¯¹è±¡çš„åé¢åŠ ä¸Š`!!`ã€‚

```kotlin
var content: String? = "hello"
fun main() {
    if (content != null) {
        printUpperCase()
    }
}
fun printUpperCase() {
    val upperCase = content!!.toUpperCase()
    println(upperCase)
}
```

### é™æ€æ–¹æ³•

è°ƒç”¨é™æ€æ–¹æ³•å¹¶ä¸éœ€è¦åˆ›å»ºç±»çš„å®ä¾‹ï¼Œè€Œå¯ä»¥ç›´æ¥ä»¥`Util.doAction()`è¿™ç§å†™æ³•è°ƒç”¨ã€‚

#### å•ä¾‹ç±»

Kotlinæä¾›äº†å•ä¾‹ç±»ï¼Œå¯ä»¥ä½¿ç”¨`Util.doAction()`çš„æ–¹å¼æ¥è°ƒç”¨ï¼Œä½†æ˜¯ä½¿ç”¨å•ä¾‹ç±»çš„å†™æ³•ä¼šå°†æ•´ä¸ªç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•å…¨éƒ¨å˜æˆç±»ä¼¼äºé™æ€æ–¹æ³•çš„è°ƒç”¨æ–¹å¼ã€‚

#### companion object

åªè®©ç±»ä¸­çš„æŸä¸€ä¸ªæ–¹æ³•å˜æˆé™æ€æ–¹æ³•çš„è°ƒç”¨æ–¹å¼ã€‚

```kotlin
// doAction1()æ–¹æ³•æ˜¯ä¸€å®šè¦å…ˆåˆ›å»ºUtilç±»çš„å®ä¾‹æ‰èƒ½è°ƒç”¨çš„
// doAction2()æ–¹æ³•å¯ä»¥ç›´æ¥ä½¿ç”¨Util.doAction2()çš„æ–¹å¼è°ƒç”¨
class Util {
    fun doAction1() {
        println("do action1")
    }
    companion object {
        fun doAction2() {
            println("do action2")
        }
    }
}
```

`doAction2()`æ–¹æ³•å…¶å®ä¹Ÿ**å¹¶ä¸æ˜¯é™æ€æ–¹æ³•**ï¼Œå¦‚æœåœ¨Javaä»£ç ä¸­ä»¥é™æ€æ–¹æ³•çš„å½¢å¼å»è°ƒç”¨çš„è¯ï¼Œä¼šå‘ç°è¿™äº›æ–¹æ³•å¹¶ä¸å­˜åœ¨ã€‚

`companion object`è¿™ä¸ªå…³é”®å­—å®é™…ä¸Šä¼šåœ¨`Util`ç±»çš„å†…éƒ¨åˆ›å»ºä¸€ä¸ªä¼´ç”Ÿç±»ï¼Œè€Œ`doAction2()`æ–¹æ³•å°±æ˜¯å®šä¹‰åœ¨è¿™ä¸ªä¼´ç”Ÿç±»é‡Œé¢çš„å®ä¾‹æ–¹æ³•ã€‚

#### æ³¨è§£

ç»™å•ä¾‹ç±»æˆ–`companion object`ä¸­çš„æ–¹æ³•åŠ ä¸Š`@JvmStatic`æ³¨è§£ï¼Œé‚£ä¹ˆKotlinç¼–è¯‘å™¨å°±ä¼šå°†è¿™äº›æ–¹æ³•ç¼–è¯‘æˆçœŸæ­£çš„é™æ€æ–¹æ³•ã€‚

```kotlin
class Util {
    fun doAction1() {
        println("do action1")
    }
    companion object {
        @JvmStatic
        fun doAction2() {
            println("do action2")
            www.blogss.cn
        }
    }
}
```

`@JvmStatic`æ³¨è§£åªèƒ½åŠ åœ¨å•ä¾‹ç±»æˆ–`companion object`ä¸­çš„æ–¹æ³•ä¸Šï¼Œå¦‚æœå°è¯•åŠ åœ¨ä¸€ä¸ªæ™®é€šæ–¹æ³•ä¸Šï¼Œä¼šç›´æ¥æç¤ºè¯­æ³•é”™è¯¯ã€‚

#### é¡¶å±‚æ–¹æ³•

é¡¶å±‚æ–¹æ³•æŒ‡çš„æ˜¯é‚£äº›æ²¡æœ‰å®šä¹‰åœ¨ä»»ä½•ç±»ä¸­çš„æ–¹æ³•ã€‚

Kotlinç¼–è¯‘å™¨ä¼šå°†æ‰€æœ‰çš„é¡¶å±‚æ–¹æ³•å…¨éƒ¨ç¼–è¯‘æˆé™æ€æ–¹æ³•ï¼Œå› æ­¤åªè¦å®šä¹‰äº†ä¸€ä¸ªé¡¶å±‚æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒå°±ä¸€å®šæ˜¯é™æ€æ–¹æ³•ã€‚

### Kotlin Tips

#### å­—ç¬¦ä¸²å†…åµŒè¡¨è¾¾å¼

```kotlin
"hello, ${obj.name}. nice to meet you!"
// å½“è¡¨è¾¾å¼ä¸­ä»…æœ‰ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œè¿˜å¯ä»¥å°†ä¸¤è¾¹çš„å¤§æ‹¬å·çœç•¥
"hello, $name. nice to meet you!"
```

#### æ‰©å±•å‡½æ•°

ç»™ç±»å‹æ·»åŠ æ–¹æ³•ã€‚

æ‰©å±•å‡½æ•°çš„è¯­æ³•ç»“æ„ï¼š

```kotlin
fun ClassName.methodName(param1: Int, param2: Int): Int {
    return 0
}
```

ç¤ºä¾‹ï¼š

```kotlin
fun String.lettersCount(): Int {
    var count = 0
    for (char in this) {
        if (char.isLetter()) {
            count++
        }
    }
    return count
}
```

### å…³é”®å­—

#### lateinitï¼šå»¶è¿Ÿåˆå§‹åŒ–

```kotlin
private lateinit var adapter: MsgAdapter
```

å¯¹ä¸€ä¸ªå…¨å±€å˜é‡ä½¿ç”¨äº†`lateinit`å…³é”®å­—æ—¶ï¼Œè¯·ä¸€å®šè¦ç¡®ä¿å®ƒåœ¨è¢«ä»»ä½•åœ°æ–¹è°ƒç”¨ä¹‹å‰ å·²ç»å®Œæˆäº†åˆå§‹åŒ–å·¥ä½œï¼Œå¦åˆ™Kotlinå°†æ— æ³•ä¿è¯ç¨‹åºçš„å®‰å…¨æ€§ã€‚

æ¥åˆ¤æ–­ä¸€ä¸ªå…¨å±€å˜é‡æ˜¯å¦å·²ç»å®Œæˆäº†åˆå§‹åŒ–ï¼š

```kotlin
private lateinit var adapter: MsgAdapter
override fun onCreate(savedInstanceState: Bundle?) {
    ...
    if (!::adapter.isInitialized) {
        adapter = MsgAdapter(msgList)
    }
    ...
}
```

#### operatorï¼šè¿ç®—ç¬¦é‡è½½

Kotlinå…è®¸å°†æ‰€æœ‰çš„è¿ç®—ç¬¦ç”šè‡³å…¶ä»–çš„å…³é”®å­—è¿›è¡Œé‡è½½ï¼Œä»è€Œæ‹“å±•è¿™äº›è¿ç®—ç¬¦å’Œå…³é”®å­—çš„ç”¨æ³•ã€‚

è¿ç®—ç¬¦é‡è½½ä½¿ç”¨çš„æ˜¯`operator`å…³é”®å­—ï¼Œåªè¦åœ¨æŒ‡å®šå‡½æ•°çš„å‰é¢åŠ ä¸Š`operator`å…³é”®å­—ï¼Œå°±å¯ä»¥å®ç°è¿ç®—ç¬¦é‡è½½çš„åŠŸèƒ½äº†ã€‚

å› ä¸ºä¸åŒçš„è¿ç®—ç¬¦å¯¹åº”çš„é‡è½½å‡½æ•°ä¹Ÿæ˜¯ä¸åŒçš„ã€‚

æ¯”å¦‚è¯´åŠ å·è¿ç®—ç¬¦å¯¹åº”çš„æ˜¯`plus()`å‡½æ•°ï¼Œå‡å·è¿ç®—ç¬¦å¯¹åº”çš„æ˜¯`minus()`å‡½æ•°ã€‚



```kotlin
class Obj {
    operator fun plus(obj: Obj): Obj {
        // å¤„ç†ç›¸åŠ çš„é€»è¾‘
    }
}
```

ç¤ºä¾‹ï¼š

```kotlin
class Money(val value: Int) {
    // è‡ªå·±ä¸è‡ªå·±ç›¸åŠ 
    operator fun plus(money: Money): Money {
        val sum = value + money.value
        return Money(sum)
    }
    // è‡ªå·±ä¸å…¶ä»–ç±»å‹ç›¸åŠ 
    operator fun plus(newValue: Int): Money {
        val sum = value + newValue
        return Money(sum)
    }
}
```

| è¯­æ³•ç³–è¡¨è¾¾å¼ | å®é™…è°ƒç”¨å‡½æ•°   |
| ------------ | -------------- |
| a + b        | a.plus(b)      |
| a - b        | a.minus(b)     |
| a * b        | a.times(b)     |
| a / b        | a.div(b)       |
| a % b        | a.rem(b)       |
| a++          | a.inc()        |
| a--          | a.dec()        |
| +a           | a.unaryPlus()  |
| -a           | a.unaryMinus() |
| !a           | a.not()        |
| a == b       | a.equals(b)    |
| a > b        |                |
| a < b        |                |
| a >= b       |                |
| a <= b       | a.compareTo(b) |
| a..b         | a.rangeTo(b)   |
| a[b]         | a.get(b)       |
| a[b] = c     | a.set(b, c)    |
| a in b       | b.contains(a)  |

## Activity

### Acitivity åŸºæœ¬ç”¨æ³•

#### å¸ƒå±€

å³å‡»`app/src/main/resç›®å½•â†’Newâ†’Directory`ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªæ–°å»ºç›®å½•çš„çª—å£ã€‚

ç„¶åå¯¹ç€åˆ›å»ºç›®å½•å³é”®`â†’Newâ†’android resource file`ï¼Œåˆä¼šå¼¹å‡ºä¸€ä¸ªæ–°å»ºå¸ƒå±€èµ„æºæ–‡ä»¶çš„çª—å£ã€‚

Layoutå¸ƒå±€ï¼š

```xml
<!-- æ–°å»ºçš„layout -->
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
	<!-- æ·»åŠ button -->
    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Button 1"
        android:id="@+id/button1"
    />
</LinearLayout>
```

AndroidManifest.xmlä¸­æ³¨å†Œ

```xml
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:tools="http://schemas.android.com/tools">
    <application
                 android:allowBackup="true"
                 android:dataExtractionRules="@xml/data_extraction_rules"
                 android:fullBackupContent="@xml/backup_rules"
                 android:icon="@mipmap/ic_launcher"
                 android:label="@string/app_name"
                 android:roundIcon="@mipmap/ic_launcher_round"
                 android:supportsRtl="true"
                 android:theme="@style/Theme.MyApplication"
                 tools:targetApi="31">
        <!-- å»ºç«‹çš„Layout -->
        <activity
                  android:name=".FirstActivity"
                  android:label="This is FirstActivity"
                  android:exported="true">
            <!-- é…ç½®ä¸»Activity -->
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest>
```

FirstActivityï¼š

```kotlin
package com.example.myapplication

import android.os.Bundle
import android.widget.Button
import android.widget.Toast
import androidx.activity.enableEdgeToEdge
import androidx.appcompat.app.AppCompatActivity
import androidx.core.view.ViewCompat
import androidx.core.view.WindowInsetsCompat
import com.example.myapplication.databinding.FirstLayoutBinding

class FirstActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.first_layout)
    }
}
```

#### Toast

Toastæ˜¯Androidç³»ç»Ÿæä¾›çš„ä¸€ç§éå¸¸å¥½çš„æé†’æ–¹å¼ï¼Œåœ¨ç¨‹åºä¸­å¯ä»¥ä½¿ç”¨å®ƒå°†ä¸€äº›çŸ­å°çš„ä¿¡æ¯é€šçŸ¥ç»™ç”¨æˆ·ï¼Œè¿™äº›ä¿¡æ¯ä¼šåœ¨ä¸€æ®µæ—¶é—´åè‡ªåŠ¨æ¶ˆå¤±ï¼Œå¹¶ä¸”ä¸ä¼šå ç”¨ä»»ä½•å±å¹•ç©ºé—´ã€‚

```kotlin
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.first_layout)
    val button1: Button = findViewById(R.id.button1)
    button1.setOnClickListener {
        Toast.makeText(this, "You clicked Button 1", Toast.LENGTH_SHORT).show()
    }
}
```

ä½¿ç”¨`ViewBinding`ç®€åŒ–ï¼Œé¿å…è°ƒç”¨`findViewById()`

ä¹¦ä¸­ä½¿ç”¨çš„`kotlin-android-extensions`æ’ä»¶ï¼Œä½†å·²è¢«å¼ƒç”¨ã€‚

ä½œè€…åœ¨ğŸ‘‰[kotlin-android-extensionsæ’ä»¶ä¹Ÿè¢«åºŸå¼ƒäº†](https://blog.csdn.net/guolin_blog/article/details/113089706)è®²è§£äº†æ›¿ä»£å“â€”â€”`ViewBinding`ã€‚

åœ¨`build.gradle`ä¸­æ·»åŠ 

```
android {
	...
    buildFeatures {
	    viewBinding = true
    }
}
```

```kotlin
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.first_layout)
    val binding = FirstLayoutBinding.inflate(layoutInflater)
    setContentView(binding.root)
    binding.button1.setOnClickListener {
        Toast.makeText(this, "You clicked Button1", Toast.LENGTH_SHORT).show()
    }
}
```

#### menu

res/menu/main.xml

```xml
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:id="@+id/add_item"
        android:title="Add"/>
    <item
        android:id="@+id/remove_item"
        android:title="Remove"/>
</menu>
```

FirstActivity

```kotlin
package com.example.myapplication

import android.os.Bundle
import android.view.Menu
import android.view.MenuItem
import android.widget.Button
import android.widget.Toast
import androidx.activity.enableEdgeToEdge
import androidx.appcompat.app.AppCompatActivity
import androidx.core.view.ViewCompat
import androidx.core.view.WindowInsetsCompat
import com.example.myapplication.databinding.FirstLayoutBinding

class FirstActivity : AppCompatActivity() {
	...
    // ctrl + o æ‰“å¼€overrideç›®æ ‡
    override fun onCreateOptionsMenu(menu: Menu?): Boolean {
        menuInflater.inflate(R.menu.main, menu)
        return true
    }

    override fun onOptionsItemSelected(item: MenuItem): Boolean {
        when (item.itemId) {
            R.id.add_item -> Toast.makeText(this, "You clicked Add", Toast.LENGTH_SHORT).show()
            R.id.remove_item -> Toast.makeText(this, "You clicked Remove", Toast.LENGTH_SHORT).show()
        }
        return true
    }
}
```

#### é”€æ¯Activity

1. æŒ‰ä¸€ä¸‹Backé”®å°±å¯ä»¥é”€æ¯å½“å‰çš„Activityäº†
2. Activityç±»æä¾›äº†ä¸€ä¸ª finish()æ–¹æ³•

```kotlin
finish()
```

### Intent

Intentæ˜¯Androidç¨‹åºä¸­å„ç»„ä»¶ä¹‹é—´è¿›è¡Œäº¤äº’çš„ä¸€ç§é‡è¦æ–¹å¼ï¼Œå®ƒä¸ä»…å¯ä»¥æŒ‡æ˜å½“å‰ç»„ä»¶æƒ³è¦æ‰§è¡Œçš„åŠ¨ä½œï¼Œè¿˜å¯ä»¥åœ¨ä¸åŒç»„ä»¶ä¹‹é—´ä¼ é€’æ•°æ®ã€‚Intentä¸€èˆ¬å¯ç”¨äºå¯åŠ¨Activityã€å¯åŠ¨Serviceä»¥åŠå‘é€å¹¿æ’­ç­‰åœºæ™¯ã€‚

#### æ˜¾å¼Intent

Intentæœ‰å¤šä¸ªæ„é€ å‡½æ•°çš„é‡è½½

* `Intent(Context packageContext, Class cls)`
  * ç¬¬ä¸€ä¸ªå‚æ•°`Context`è¦æ±‚æä¾›ä¸€ä¸ªå¯åŠ¨Activityçš„ä¸Šä¸‹æ–‡
  * ç¬¬äºŒä¸ªå‚æ•°`Class`ç”¨äºæŒ‡å®šæƒ³è¦å¯åŠ¨çš„ç›®æ ‡Activity

Activityç±»ä¸­æä¾›äº†ä¸€ä¸ª`startActivity()`æ–¹æ³•ï¼Œä¸“é—¨ç”¨äºå¯åŠ¨Activityï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª`Intent`å‚æ•°ï¼Œè¿™é‡Œå°†æ„å»ºå¥½çš„`Intent`ä¼ å…¥`startActivity()`æ–¹æ³•å°±å¯ä»¥å¯åŠ¨ç›®æ ‡Activityäº†ã€‚

#### éšå¼Intent

éšå¼Intentå¹¶ä¸æ˜ç¡®æŒ‡å‡ºæƒ³è¦å¯åŠ¨å“ªä¸€ä¸ªActivityï¼Œè€Œæ˜¯æŒ‡å®šäº†ä¸€ç³»åˆ—æ›´ä¸ºæŠ½è±¡çš„actionå’Œcategoryç­‰ä¿¡æ¯ï¼Œç„¶åäº¤ç”±ç³»ç»Ÿå»åˆ†æè¿™ä¸ªIntentï¼Œå¹¶æ‰¾å‡ºåˆé€‚çš„Activityå»å¯åŠ¨ã€‚

AndroidManifest.xmlï¼š

æŒ‡æ˜äº†å½“å‰Activityå¯ä»¥å“åº” `com.example.activitytest.ACTION_START`è¿™ä¸ªactionï¼Œè€Œæ ‡ç­¾åˆ™åŒ…å«äº† ä¸€äº›é™„åŠ ä¿¡æ¯

```xml
<activity
          android:name=".SecondActivity"
          android:exported="false">
    <intent-filter>
        <action android:name="com.example.myapplication.ACTION_START" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity>
```

ä¿®æ”¹æŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼š

- è¡¨æ˜æƒ³è¦å¯åŠ¨èƒ½å¤Ÿå“åº”`com.example.activitytest.ACTION_START`è¿™ä¸ªactionçš„Activity
- åœ¨è°ƒç”¨`startActivity()`æ–¹æ³•çš„æ—¶å€™ä¼šè‡ªåŠ¨å°†`android.intent.category.DEFAULT`æ·»åŠ åˆ°Intentä¸­ã€‚

```kotlin
button1.setOnClickListener {
    val intent = Intent("com.example.activitytest.ACTION_START")
    startActivity(intent)
}
```

æ¯ä¸ªIntentä¸­åªèƒ½æŒ‡å®šä¸€ä¸ªactionï¼Œä½†èƒ½æŒ‡å®šå¤šä¸ªcategoryã€‚

```kotlin
// FirstActivity
button1.setOnClickListener {
    val intent = Intent("com.example.activitytest.ACTION_START")
    intent.addCategory("com.example.activitytest.MY_CATEGORY")
    startActivity(intent)
}
```

```xml
// AndroidManifest.xml
<activity android:name=".SecondActivity" >
    <intent-filter>
        <action android:name="com.example.activitytest.ACTION_START" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="com.example.activitytest.MY_CATEGORY"/>
    </intent-filter>
</activity>
```

ä½¿ç”¨éšå¼Intentï¼Œä¸ä»…å¯ä»¥å¯åŠ¨è‡ªå·±ç¨‹åºå†…çš„Activityï¼Œè¿˜å¯ä»¥å¯åŠ¨å…¶ä»–ç¨‹åºçš„Activityã€‚

```kotlin
// è°ƒç”¨ç³»ç»Ÿçš„æµè§ˆå™¨æ¥æ‰“å¼€ç½‘é¡µ
button1.setOnClickListener {
    val intent = Intent(Intent.ACTION_VIEW)
    intent.data = Uri.parse("https://www.baidu.com")
    startActivity(intent)
}
```

åœ¨`<intent-filter>`æ ‡ç­¾ä¸­å†é…ç½®ä¸€ä¸ª`<data>`æ ‡ç­¾ï¼Œç”¨äºæ›´ç²¾ç¡®åœ°æŒ‡å®šå½“å‰Activityèƒ½å¤Ÿå“åº”çš„æ•°æ®ã€‚

æ ‡ç­¾ä¸­ä¸»è¦å¯ä»¥é…ç½®ä»¥ä¸‹å†…å®¹ã€‚

1. android:schemeï¼šæŒ‡å®šæ•°æ®çš„åè®®éƒ¨åˆ†ï¼Œå¦‚ä¸Šä¾‹ä¸­çš„httpséƒ¨åˆ†
2. android:hostï¼šæŒ‡å®šæ•°æ®çš„ä¸»æœºåéƒ¨åˆ†
3. android:portï¼šæŒ‡å®šæ•°æ®çš„ç«¯å£éƒ¨åˆ†ï¼Œä¸€èˆ¬ç´§éšåœ¨ä¸»æœºåä¹‹å
4. android:pathï¼šæŒ‡å®šä¸»æœºåå’Œç«¯å£ä¹‹åçš„éƒ¨åˆ†ï¼Œå¦‚ä¸€æ®µç½‘å€ä¸­è·Ÿåœ¨åŸŸåä¹‹åçš„å†…å®¹
5. android:mimeTypeï¼šæŒ‡å®šå¯ä»¥å¤„ç†çš„æ•°æ®ç±»å‹ï¼Œå…è®¸ä½¿ç”¨é€šé…ç¬¦çš„æ–¹å¼è¿›è¡ŒæŒ‡å®šã€‚

åªæœ‰å½“æ ‡ç­¾ä¸­æŒ‡å®šçš„å†…å®¹å’ŒIntentä¸­æºå¸¦çš„Dataå®Œå…¨ä¸€è‡´æ—¶ï¼Œå½“å‰Activityæ‰èƒ½å¤Ÿå“åº”è¯¥Intentã€‚

#### å‘ä¸‹ä¸€ä¸ªActivityä¼ é€’æ•°æ®

Intentä¸­æä¾›äº†ä¸€ç³»åˆ—`putExtra()`æ–¹æ³•çš„é‡è½½ï¼Œå¯ä»¥æŠŠæƒ³è¦ä¼ é€’çš„æ•°æ®æš‚å­˜åœ¨Intentä¸­ï¼Œåœ¨å¯åŠ¨å¦ä¸€ä¸ªActivityåï¼Œåªéœ€è¦æŠŠè¿™äº›æ•°æ®ä»Intentä¸­å–å‡ºå°±å¯ä»¥äº†

```kotlin
// FirstActivity
button1.setOnClickListener {
    val data = "Hello SecondActivity"
    val intent = Intent(this, SecondActivity::class.java)
    // putExtra(): 
    // ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é”®ï¼Œç”¨äºä¹‹åä»Intentä¸­å–å€¼
    // ç¬¬äºŒä¸ªå‚æ•°æ˜¯çœŸæ­£è¦ä¼ é€’çš„æ•°æ®
    intent.putExtra("extra_data", data)
    startActivity(intent)
}

// å¦ä¸€ä¸ªActivity
class SecondActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.second_layout)
        // intentè°ƒç”¨çš„æ˜¯çˆ¶ç±»çš„getIntent()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šè·å–ç”¨äºå¯åŠ¨SecondActivityçš„Intent
        val extraData = intent.getStringExtra("extra_data")
        Log.d("SecondActivity", "extra data is $extraData")
    }
}
```

#### è¿”å›æ•°æ®ç»™ä¸Šä¸€ä¸ªActivity

`startActivityForResult()`æ–¹æ³•ç”¨äºå¯åŠ¨Activityï¼Œä½†å®ƒæœŸæœ›åœ¨Activityé”€æ¯çš„æ—¶å€™èƒ½å¤Ÿè¿”å›ä¸€ä¸ªç»“æœç»™ä¸Šä¸€ä¸ªActivityï¼ˆåŒºåˆ«äº`startActivity`ï¼‰

```kotlin
button1.setOnClickListener {
    val intent = Intent(this, SecondActivity::class.java)
    // ç¬¬ä¸€ä¸ªå‚æ•°è¿˜æ˜¯Intent
    // ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¯·æ±‚ç ï¼Œç”¨äºåœ¨ä¹‹åçš„å›è°ƒä¸­åˆ¤æ–­æ•°æ®çš„æ¥æºï¼Œå”¯ä¸€å€¼
    startActivityForResult(intent, 1)
}
```

1. é€šè¿‡ç‚¹å‡»æŒ‰é’®è¿”å›ä¸Šä¸€çº§

   1. éœ€è¦è¿”å›æ•°æ®çš„Activityæ„å»ºäº†ä¸€ä¸ªIntentï¼Œä»…ä»…ç”¨äºä¼ é€’æ•°æ®ã€‚

   2. æŠŠè¦ä¼ é€’çš„æ•°æ®å­˜æ”¾åœ¨Intentä¸­ï¼Œç„¶åè°ƒç”¨äº†`setResult()`æ–¹æ³•ã€‚

   3. è¿™ä¸ªæ–¹æ³•ä¸“é—¨ç”¨äºå‘ä¸Šä¸€ä¸ªActivityè¿”å›æ•°æ®ã€‚

   4. `setResult()`æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š

      1. ç¬¬ä¸€ä¸ªå‚æ•°ç”¨äºå‘ä¸Šä¸€ä¸ªActivityè¿”å›å¤„ç†ç»“æœ
         1. ä¸€èˆ¬åªä½¿ç”¨`RESULT_OK`æˆ–`RESULT_CANCELED`è¿™ä¸¤ä¸ªå€¼
      2. ç¬¬äºŒä¸ªå‚æ•°åˆ™æŠŠå¸¦æœ‰æ•°æ®çš„Intentä¼ é€’å›å»ã€‚

   5. æœ€åè°ƒç”¨äº†`finish()`æ–¹æ³•æ¥é”€æ¯å½“å‰Activityã€‚

   6. ```kotlin
      class SecondActivity : AppCompatActivity() {
          override fun onCreate(savedInstanceState: Bundle?) {
              super.onCreate(savedInstanceState)
              setContentView(R.layout.second_layout)
              button2.setOnClickListener {
                  val intent = Intent()
                  intent.putExtra("data_return", "Hello FirstActivity")
                  setResult(RESULT_OK, intent)
                  finish()
              }
          }
      }
      ```

2. é€šè¿‡Backé”®è¿”å›ä¸Šä¸€çº§

   1. åœ¨SecondActivityä¸­é‡å†™`onBackPressed()`æ–¹æ³•

   2. ```kotlin
      override fun onBackPressed() {
          val intent = Intent()
          intent.putExtra("data_return", "Hello FirstActivity")
          setResult(RESULT_OK, intent)
          finish()
      }
      ```

ç”±äºæ˜¯ä½¿ç”¨`startActivityForResult()`æ–¹æ³•æ¥å¯åŠ¨SecondActivityçš„ï¼Œåœ¨ SecondActivityè¢«é”€æ¯ä¹‹åä¼šå›è°ƒä¸Šä¸€ä¸ªActivityçš„`onActivityResult()`æ–¹æ³•ï¼Œå› æ­¤]éœ€è¦åœ¨FirstActivityä¸­é‡å†™è¿™ä¸ªæ–¹æ³•æ¥å¾—åˆ°è¿”å›çš„æ•°æ®ã€‚

1. `onActivityResult(requestCode, resultCode, data)`
   1. ç¬¬ä¸€ä¸ªå‚æ•°requestCode: å¯åŠ¨Activityæ—¶ä¼ å…¥çš„è¯·æ±‚ç 
   2. ç¬¬äºŒä¸ªå‚æ•°resultCode: è¿”å›æ•°æ®æ—¶ä¼ å…¥çš„å¤„ç†ç»“æœ
   3. ç¬¬ä¸‰ä¸ªå‚æ•°data: æºå¸¦ç€è¿”å›æ•°æ®çš„Intent

```kotlin
override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
    super.onActivityResult(requestCode, resultCode, data)
    when (requestCode) {
        1 -> if (resultCode == RESULT_OK) {
            val returnedData = data?.getStringExtra("data_return")
            Log.d("FirstActivity", "returned data is $returnedData")
        }
    }
}
```

### Activityçš„ç”Ÿå‘½å‘¨æœŸ

#### ActivityçŠ¶æ€

1. è¿è¡ŒçŠ¶æ€ï¼šActivityä½äºè¿”å›æ ˆçš„æ ˆé¡¶
2. æš‚åœçŠ¶æ€ï¼šActivityä¸å†å¤„äºæ ˆé¡¶ä½ç½®ï¼Œä½†ä»ç„¶å¯è§
3. åœæ­¢çŠ¶æ€ï¼šActivityä¸å†å¤„äºæ ˆé¡¶ä½ç½®ï¼Œå¹¶ä¸”å®Œå…¨ä¸å¯è§
4. é”€æ¯çŠ¶æ€ï¼šActivityä»è¿”å›æ ˆä¸­ç§»é™¤

#### Activityçš„ç”Ÿå­˜æœŸ

Activityç±»çš„7ä¸ªå›è°ƒæ–¹æ³•ï¼ˆè¦†ç›–äº†Activityç”Ÿå‘½å‘¨æœŸçš„æ¯ä¸€ä¸ªç¯èŠ‚ï¼‰

1. `onCreate()`ï¼šåœ¨Activityç¬¬ä¸€æ¬¡è¢«åˆ›å»ºçš„æ—¶å€™è°ƒç”¨ã€‚
   1. åº”è¯¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å®ŒæˆActivityçš„åˆå§‹åŒ–æ“ä½œï¼Œæ¯”å¦‚åŠ è½½å¸ƒå±€ã€ç»‘å®šäº‹ä»¶ç­‰ã€‚
2. `onStart()`ï¼šåœ¨Activityç”±ä¸å¯è§å˜ä¸ºå¯è§çš„æ—¶å€™è°ƒç”¨ã€‚
3. `onResume()`ï¼šåœ¨Activityå‡†å¤‡å¥½å’Œç”¨æˆ·è¿›è¡Œäº¤äº’çš„æ—¶å€™è°ƒç”¨ã€‚
   1. æ­¤æ—¶çš„Activityä¸€å®šä½äºè¿”å›æ ˆçš„æ ˆé¡¶ï¼Œå¹¶ä¸”å¤„äºè¿è¡ŒçŠ¶æ€ã€‚
4. `onPause()`ï¼šåœ¨ç³»ç»Ÿå‡†å¤‡å»å¯åŠ¨æˆ–è€…æ¢å¤å¦ä¸€ä¸ªActivityçš„æ—¶å€™è°ƒç”¨ã€‚
   1. é€šå¸¸ä¼šåœ¨è¿™ä¸ªæ–¹æ³•ä¸­å°†ä¸€äº›æ¶ˆè€—CPUçš„èµ„æºé‡Šæ”¾æ‰ï¼Œä»¥åŠä¿å­˜ä¸€äº›å…³é”®æ•°æ®ã€‚
   2. è¿™ä¸ªæ–¹æ³•çš„æ‰§è¡Œé€Ÿåº¦ä¸€å®šè¦å¿«ï¼Œä¸ç„¶ä¼šå½±å“åˆ°æ–°çš„æ ˆé¡¶Activityçš„ä½¿ç”¨ã€‚
5. `onStop()`ï¼šåœ¨Activityå®Œå…¨ä¸å¯è§çš„æ—¶å€™è°ƒç”¨ã€‚
   1. å®ƒå’Œ`onPause()`æ–¹æ³•çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œå¦‚æœå¯åŠ¨çš„æ–°Activityæ˜¯ä¸€ä¸ªå¯¹è¯æ¡†å¼çš„Activityï¼Œé‚£ä¹ˆ`onPause()`æ–¹æ³•ä¼šå¾—åˆ°æ‰§è¡Œï¼Œè€Œ`onStop()`æ–¹æ³•å¹¶ä¸ä¼šæ‰§è¡Œã€‚
6. `onDestroy()`ï¼šåœ¨Activityè¢«é”€æ¯ä¹‹å‰è°ƒç”¨ã€‚
7. `onRestart()`ï¼šåœ¨Activityç”±åœæ­¢çŠ¶æ€å˜ä¸ºè¿è¡ŒçŠ¶æ€ä¹‹å‰è°ƒç”¨ã€‚

![](ç¬¬ä¸€è¡Œä»£ç -0/image-20240422172048468.png)

å½“ä¸€ä¸ªActivityè¿›å…¥äº†åœæ­¢çŠ¶æ€ï¼Œæ˜¯æœ‰å¯èƒ½è¢«ç³»ç»Ÿå›æ”¶çš„ã€‚

> åº”ç”¨ä¸­æœ‰ä¸€ä¸ªActivity Aï¼Œç”¨æˆ·åœ¨Activity Açš„åŸºç¡€ä¸Šå¯åŠ¨äº†Activity Bï¼ŒActivity Aå°±è¿›å…¥äº†åœæ­¢çŠ¶æ€ï¼Œè¿™ä¸ªæ—¶å€™ç”±äºç³»ç»Ÿå†…å­˜ä¸è¶³ï¼Œå°†Activity Aå›æ”¶æ‰äº†ï¼Œç„¶åç”¨æˆ·æŒ‰ä¸‹Backé”®è¿”å›Activity Aè¿˜æ˜¯ä¼šæ­£å¸¸æ˜¾ç¤ºActivity Açš„ï¼Œåªä¸è¿‡è¿™æ—¶å¹¶ä¸ä¼šæ‰§è¡Œ `onRestart()`æ–¹æ³•ï¼Œè€Œæ˜¯ä¼šæ‰§è¡ŒActivity Açš„`onCreate()`æ–¹æ³•ï¼Œå› ä¸ºActivity Aåœ¨è¿™ç§æƒ…å†µä¸‹ä¼šè¢«é‡æ–°åˆ›å»ºä¸€æ¬¡ã€‚ 
>
> Activity Aä¸­æ˜¯å¯èƒ½å­˜åœ¨ä¸´æ—¶æ•°æ®å’ŒçŠ¶æ€çš„ï¼ŒActivity Aè¢«ç³»ç»Ÿå›æ”¶åï¼Œæ•°æ®å’ŒçŠ¶æ€ä¼šä¸¢å¤±ã€‚
>
> å½“æ‰‹æœºçš„å±å¹•å‘ç”Ÿæ—‹è½¬çš„æ—¶å€™ï¼ŒActivityä¹Ÿä¼šç»å†ä¸€ä¸ªé‡æ–°åˆ›å»ºçš„è¿‡ç¨‹ï¼Œå› è€Œåœ¨è¿™ç§æƒ…å†µ ä¸‹ï¼ŒActivityä¸­çš„æ•°æ®ä¹Ÿä¼šä¸¢å¤±ã€‚

* `onSaveInstanceState(outState: Bundle)`ä»¥ä¿è¯åœ¨Activityè¢«å›æ”¶ä¹‹å‰ä¸€å®šä¼šè¢«è°ƒç”¨ã€‚

* `Bundle`æä¾›äº†ä¸€ç³»åˆ—çš„æ–¹æ³•ç”¨äºä¿å­˜æ•°æ®ï¼š

  * æ¯ä¸ªä¿å­˜æ–¹æ³•éœ€è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°

    * ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é”®ï¼Œç”¨äºåé¢ä»Bundleä¸­å–å€¼

    * ç¬¬äºŒä¸ªå‚æ•°æ˜¯çœŸæ­£è¦ä¿å­˜çš„å†…å®¹

    * `putString()`æ–¹æ³•ä¿å­˜å­—ç¬¦ä¸²

    * `putInt()`æ–¹æ³•ä¿å­˜æ•´å‹æ•°æ®

* å­˜

  * ```kotlin
    // åœ¨MainActivityä¸­
    override fun onSaveInstanceState(outState: Bundle) {
        super.onSaveInstanceState(outState)
        val tempData = "Something you just typed"
        outState.putString("data_key", tempData)
    }
    ```

* å–

  * ```kotlin
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        Log.d(tag, "onCreate")
        setContentView(R.layout.activity_main)
        if (savedInstanceState != null) {
            val tempData = savedInstanceState.getString("data_key")
            Log.d(tag, "tempData is $tempData")
        }
        ...
    }
    ```

### Activityçš„å¯åŠ¨æ¨¡å¼

åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œåº”è¯¥æ ¹æ®ç‰¹å®šçš„éœ€æ±‚ä¸ºæ¯ä¸ªActivityæŒ‡å®šæ°å½“çš„å¯åŠ¨æ¨¡å¼ã€‚

å¯åŠ¨æ¨¡å¼ä¸€å…±æœ‰4ç§ï¼Œåˆ†åˆ«æ˜¯`standard`ã€`singleTop`ã€`singleTask`å’Œ`singleInstance`ï¼Œå¯ä»¥åœ¨`AndroidManifest.xml`ä¸­é€šè¿‡ç»™æ ‡ç­¾æŒ‡å®š`android:launchMode`å±æ€§æ¥é€‰æ‹©å¯åŠ¨æ¨¡å¼ã€‚

```kotlin
<activity
android:name=".FirstActivity"
android:launchMode="singleTop" // ******
android:label="This is FirstActivity">
    <intent-filter>
        <action android:name="android.intent.action.MAIN"/>
        <category android:name="android.intent.category.LAUNCHER"/>
    </intent-filter>
</activity>
```

#### standard

`standard`æ˜¯Activityé»˜è®¤çš„å¯åŠ¨æ¨¡å¼ã€‚

å¯¹äºä½¿ç”¨standardæ¨¡å¼çš„Activityï¼Œç³»ç»Ÿä¸ä¼šåœ¨ä¹è¿™ä¸ªActivityæ˜¯å¦å·²ç»åœ¨è¿”å›æ ˆä¸­å­˜åœ¨ï¼Œæ¯æ¬¡å¯åŠ¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªè¯¥Activityçš„æ–°å®ä¾‹ã€‚

#### singleTop

å½“Activityçš„å¯åŠ¨æ¨¡å¼æŒ‡å®šä¸º`singleTop`ï¼Œåœ¨å¯åŠ¨Activityæ—¶å¦‚æœå‘ç°è¿”å›æ ˆçš„æ ˆé¡¶å·²ç»æ˜¯è¯¥Activityï¼Œåˆ™è®¤ä¸ºå¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒï¼Œä¸ä¼šå†åˆ›å»ºæ–°çš„Activityå®ä¾‹ã€‚

å½“Activityå¹¶æœªå¤„äºæ ˆé¡¶ä½ç½®æ—¶ï¼Œå†å¯åŠ¨Activityè¿˜æ˜¯ä¼šåˆ›å»ºæ–°çš„å®ä¾‹çš„ã€‚

#### singleTask

å½“Activityçš„å¯åŠ¨æ¨¡å¼æŒ‡å®šä¸º`singleTask`ï¼Œæ¯æ¬¡å¯åŠ¨è¯¥Activityæ—¶ï¼Œç³»ç»Ÿé¦–å…ˆä¼šåœ¨è¿”å›æ ˆä¸­æ£€æŸ¥æ˜¯å¦å­˜åœ¨è¯¥Activityçš„å®ä¾‹ï¼Œå¦‚æœå‘ç°å·²ç»å­˜åœ¨åˆ™ç›´æ¥ä½¿ç”¨è¯¥å®ä¾‹ï¼Œå¹¶æŠŠåœ¨è¿™ä¸ªActivityä¹‹ä¸Šçš„æ‰€æœ‰å…¶ä»–Activityç»Ÿç»Ÿå‡ºæ ˆï¼Œå¦‚æœæ²¡æœ‰å‘ç°å°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Activityå®ä¾‹ã€‚

#### singleInstance

æŒ‡å®šä¸º`singleInstance`æ¨¡å¼çš„Activityä¼šå¯ç”¨ä¸€ä¸ªæ–°çš„è¿”å›æ ˆæ¥ç®¡ç†è¿™ä¸ªActivityï¼ˆå…¶å®å¦‚æœ`singleTask`æ¨¡å¼æŒ‡å®šäº†ä¸åŒçš„taskAffinityï¼Œä¹Ÿä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„è¿”å›æ ˆï¼‰ã€‚

åœ¨`singleInstance`æ¨¡å¼ä¸‹ï¼Œä¼šæœ‰ä¸€ä¸ªå•ç‹¬çš„è¿”å›æ ˆæ¥ç®¡ç†è¿™ä¸ªActivityï¼Œä¸ç®¡æ˜¯å“ªä¸ªåº”ç”¨ç¨‹åºæ¥è®¿é—®è¿™ä¸ªActivityï¼Œéƒ½å…±ç”¨åŒä¸€ä¸ªè¿”å›æ ˆï¼Œä¹Ÿå°±è§£å†³äº†å…±äº«Activityå®ä¾‹çš„é—®é¢˜ã€‚

![](ç¬¬ä¸€è¡Œä»£ç -0/image-20240422205112164.png)

### Tips

#### çŸ¥æ™“å½“å‰æ˜¯å“ªä¸€ä¸ªActivity

```Kotlin
// ä¸éœ€è¦è®©BaseActivityåœ¨AndroidManifest.xmlä¸­æ³¨å†Œ
// è¦è®©BaseActivityæˆä¸ºé¡¹ç›®ä¸­æ‰€æœ‰Activityçš„çˆ¶ç±»
open class BaseActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        Log.d("BaseActivity", javaClass.simpleName)
    }
}
```

#### é€€å‡ºç¨‹åº

```kotlin
object ActivityCollector {
    private val activities = ArrayList<Activity>()
    fun addActivity(activity: Activity) {
        activities.add(activity)
    }
    fun removeActivity(activity: Activity) {
        activities.remove(activity)
    }
    fun finishAll() {
        for (activity in activities) {
            if (!activity.isFinishing) {
                activity.finish()
            }
        }
        activities.clear()
    }
}

open class BaseActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        Log.d("BaseActivity", javaClass.simpleName)
        ActivityCollector.addActivity(this)
    }
    override fun onDestroy() {
        super.onDestroy()
        ActivityCollector.removeActivity(this)
    }
}

class ThirdActivity : BaseActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        Log.d("ThirdActivity", "Task id is $taskId")
        setContentView(R.layout.third_layout)
        button3.setOnClickListener {
            ActivityCollector.finishAll()
        }
    }
}
```

#### å¯åŠ¨Activityçš„æœ€ä½³å†™æ³•

SecondActivityæ‰€éœ€è¦çš„æ•°æ®åœ¨æ–¹æ³•å‚æ•°ä¸­å…¨éƒ¨ä½“ç°å‡ºæ¥äº†ï¼Œå¯ä»¥éå¸¸æ¸…æ™°åœ°çŸ¥é“å¯åŠ¨SecondActivityéœ€è¦ä¼ é€’å“ªäº›æ•°æ®ã€‚

```kotlin
// å¯åŠ¨çš„Activity
class SecondActivity : BaseActivity() {
    ...
    companion object {
        fun actionStart(context: Context, data1: String, data2: String) {
            val intent = Intent(context, SecondActivity::class.java)
            intent.putExtra("param1", data1)
            intent.putExtra("param2", data2)
            context.startActivity(intent)
        }
    }
}

// å¦‚ä½•å¯åŠ¨SecondActivity
button1.setOnClickListener {
    SecondActivity.actionStart(this, "data1", "data2")
}
```

#### ViewBinding

åœ¨`build.gradle`ä¸­æ·»åŠ 

```
android {
	...
    buildFeatures {
	    viewBinding = true
    }
}
```

##### åœ¨Activityä¸­ä½¿ç”¨

```kotlin
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.first_layout)
    val binding = FirstLayoutBinding.inflate(layoutInflater)
    setContentView(binding.root)
    binding.button1.setOnClickListener {
        Toast.makeText(this, "You clicked Button1", Toast.LENGTH_SHORT).show()
    }
}
```

##### åœ¨Fragmentä¸­ä½¿ç”¨

```kotlin
package com.example.fragmenttest1

import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.fragment.app.Fragment
import com.example.fragmenttest1.databinding.LeftFragmentBinding

class LeftFragment : Fragment() {
    var buttonClickListener: ButtonClickListener? = null
    private var _binding: LeftFragmentBinding? = null
    private val binding get() = _binding!!

    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View? {
        _binding = LeftFragmentBinding.inflate(inflater, container, false)
        return binding.root
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)
        binding.button.setOnClickListener {
            buttonClickListener?.onButtonClick()
        }
    }

    override fun onDestroyView() {
        super.onDestroyView()
        _binding = null
    }

    interface ButtonClickListener {
        fun onButtonClick()
    }
}
```



## UI

### å¸¸ç”¨æ§ä»¶

- `android:visibility`ï¼šæŒ‡å®šAndroidæ§ä»¶çš„å¯è§å±æ€§
  - `visible`ï¼šè¡¨ç¤ºæ§ä»¶æ˜¯å¯è§çš„ï¼Œè¿™ä¸ªå€¼æ˜¯é»˜è®¤å€¼ï¼Œä¸æŒ‡å®šandroid:visibilityæ—¶ï¼Œæ§ä»¶éƒ½æ˜¯å¯è§çš„
  - `invisible`ï¼šè¡¨ç¤ºæ§ä»¶ä¸å¯è§ï¼Œä½†æ˜¯å®ƒä»ç„¶å æ®ç€åŸæ¥çš„ä½ç½®å’Œå¤§å°
  - `gone`ï¼šè¡¨ç¤ºæ§ä»¶ä¸ä»…ä¸å¯è§ï¼Œè€Œä¸”ä¸å†å ç”¨ä»»ä½•å±å¹•ç©ºé—´
  - `setVisibility()`æ–¹æ³•ï¼Œå…è®¸ä¼ å…¥`View.VISIBLE`ã€`View.INVISIBLE`å’Œ`View.GONE`è¿™3ç§å€¼ï¼Œæ¥æ”¹å˜ç©ºé—´çš„å¯è§å±æ€§

#### TextView

```xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent">
    <TextView
              android:id="@+id/textView"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:gravity="center"
              android:textColor="#00ff00"
              android:textSize="24sp"

              android:text="This is TextView"/>
</LinearLayout>
```

1. `android:id`ï¼šå”¯ä¸€æ ‡è¯†ç¬¦
2. `android:layout_width`å’Œ`android:layout_height`ï¼šæŒ‡å®šäº†æ§ä»¶çš„å®½åº¦å’Œé«˜åº¦
   1. Androidä¸­æ‰€æœ‰çš„æ§ä»¶éƒ½å…·æœ‰è¿™ä¸¤ä¸ªå±æ€§ï¼Œå¯é€‰å€¼æœ‰3ç§ï¼šmatch_parentã€wrap_contentå’Œå›ºå®šå€¼
      1. match_parentè¡¨ç¤ºè®©å½“å‰æ§ä»¶çš„å¤§å°å’Œçˆ¶å¸ƒå±€çš„å¤§å°ä¸€æ ·ï¼Œä¹Ÿå°±æ˜¯ç”±çˆ¶å¸ƒå±€æ¥å†³å®šå½“å‰æ§ä»¶çš„å¤§å°
      2. wrap_contentè¡¨ç¤ºè®©å½“å‰æ§ä»¶çš„å¤§å°èƒ½å¤Ÿåˆšå¥½åŒ…å«ä½é‡Œé¢çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯ç”±æ§ä»¶å†…å®¹å†³å®šå½“å‰æ§ä»¶çš„å¤§å°
      3. å›ºå®šå€¼è¡¨ç¤ºè¡¨ç¤ºç»™æ§ä»¶æŒ‡å®šä¸€ä¸ªå›ºå®šçš„å°ºå¯¸ï¼Œå•ä½ä¸€èˆ¬ç”¨dpï¼Œè¿™æ˜¯ä¸€ç§å±å¹•å¯†åº¦æ— å…³çš„å°ºå¯¸å•ä½ï¼Œå¯ä»¥ä¿è¯åœ¨ä¸åŒåˆ†è¾¨ç‡çš„æ‰‹æœºä¸Šæ˜¾ç¤ºæ•ˆæœå°½å¯èƒ½åœ°ä¸€è‡´
3. `android:gravity`ï¼šæŒ‡å®šæ–‡å­—çš„å¯¹é½æ–¹å¼ï¼ˆé»˜è®¤å·¦ä¸Šï¼‰ï¼Œå¯é€‰å€¼æœ‰topã€bottomã€startã€ endã€centerç­‰ï¼Œå¯ä»¥ç”¨`|`æ¥åŒæ—¶æŒ‡å®šå¤šä¸ªå€¼
   1. `center_vertical|center_horizontal`è¡¨ç¤ºæ–‡å­—åœ¨å‚ç›´å’Œæ°´å¹³æ–¹å‘éƒ½å±…ä¸­å¯¹é½
4. `android:textColor`ï¼šæŒ‡å®šæ–‡å­—çš„é¢œè‰²
5. `android:textSize`ï¼šæŒ‡å®šæ–‡å­—çš„å¤§å°
   1. æ–‡å­—å¤§å°è¦ä½¿ç”¨spä½œä¸ºå•ä½

#### Button

```xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent">
    <Button
            android:id="@+id/button"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Button" />
</LinearLayout>
```

1. `android:textAllCaps`
   1. `true`è¡¨ç¤ºæŒ‰é’®ä¸Šçš„è‹±æ–‡å­—æ¯å…¨éƒ¨è½¬æ¢æˆå¤§å†™
   2. `false`è¡¨ç¤ºä¿ç•™åŸå§‹æ–‡å­—å†…å®¹

ä¸ºButtonçš„ç‚¹å‡»äº‹ä»¶æ³¨å†Œä¸€ä¸ªç›‘å¬å™¨ï¼š

```kotlin
// å†™æ³•1
class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        button.setOnClickListener {
            // åœ¨æ­¤å¤„æ·»åŠ é€»è¾‘
        }
    }
}

// å†™æ³•2
class MainActivity : AppCompatActivity(), View.OnClickListener {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        button.setOnClickListener(this)
    }
    override fun onClick(v: View?) {
        when (v?.id) {
            R.id.button -> {
                // åœ¨æ­¤å¤„æ·»åŠ é€»è¾‘
            }
        }
    }
}
```

#### EditText

EditTextå…è®¸ç”¨æˆ·åœ¨æ§ä»¶é‡Œè¾“å…¥å’Œç¼–è¾‘å†…å®¹ï¼Œå¹¶å¯ä»¥åœ¨ç¨‹åºä¸­å¯¹è¿™äº›å†…å®¹è¿›è¡Œå¤„ç†ã€‚

```xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent">
    <EditText
              android:id="@+id/editText"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:hint="Type something here"
              android:maxLines="2"
              />
</LinearLayout>
```

è·å–å†…å®¹ï¼š

```kotlin
class MainActivity : AppCompatActivity(), View.OnClickListener {
    ...
    override fun onClick(v: View?) {
        when (v?.id) {
            R.id.button -> {
                val inputText = editText.text.toString()
                Toast.makeText(this, inputText, Toast.LENGTH_SHORT).show()
            }
        }
    }
}
```

#### ImageView

ImageViewæ˜¯ç”¨äºåœ¨ç•Œé¢ä¸Šå±•ç¤ºå›¾ç‰‡çš„ä¸€ä¸ªæ§ä»¶ã€‚

å›¾ç‰‡é€šå¸¸æ˜¯æ”¾åœ¨ä»¥drawableå¼€å¤´çš„ç›®å½•ä¸‹çš„ï¼Œå¹¶ä¸”è¦å¸¦ä¸Šå…·ä½“çš„åˆ†è¾¨ç‡ã€‚

```xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent">
    ...
    <ImageView
               android:id="@+id/imageView"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:src="@drawable/img_1"
               />
</LinearLayout>

```

åŠ¨æ€ä¿®æ”¹å›¾ç‰‡ï¼š

```kotlin
class MainActivity : AppCompatActivity(), View.OnClickListener {
    override fun onClick(v: View?) {
        when (v?.id) {
            R.id.button -> {
                imageView.setImageResource(R.drawable.img_2)
            }
        }
    }
}
```

#### ProgressBar

ProgressBarç”¨äºåœ¨ç•Œé¢ä¸Šæ˜¾ç¤ºä¸€ä¸ªè¿›åº¦æ¡ï¼Œè¡¨ç¤ºç¨‹åºæ­£åœ¨åŠ è½½ä¸€äº›æ•°æ®ã€‚

1. `style`ï¼šæŒ‡å®šä¸åŒçš„æ ·å¼
2. `android:max`ï¼šç»™è¿›åº¦æ¡è®¾ç½®æœ€å¤§å€¼

```Xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent">
    <ProgressBar
                 android:id="@+id/progressBar"
                 android:layout_width="match_parent"
                 android:layout_height="wrap_content"
                 style="?android:attr/progressBarStyleHorizontal"
                 android:max="100"
                 />
</LinearLayout>
```

ä¿®æ”¹è¿›åº¦ï¼š

```kotlin
class MainActivity : AppCompatActivity(), View.OnClickListener {
    ...
    override fun onClick(v: View?) {
        when (v?.id) {
            R.id.button -> {
                progressBar.progress = progressBar.progress + 10
            }
        }
    }
}
```

#### AlertDialog

AlertDialogå¯ä»¥åœ¨å½“å‰ç•Œé¢å¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†ï¼Œè¿™ä¸ªå¯¹è¯æ¡†æ˜¯ç½®é¡¶äºæ‰€æœ‰ç•Œé¢å…ƒç´ ä¹‹ä¸Šçš„ï¼Œèƒ½å¤Ÿå±è”½å…¶ä»–æ§ä»¶çš„äº¤äº’èƒ½åŠ›ï¼Œå› æ­¤AlertDialogä¸€èˆ¬ç”¨äºæç¤ºä¸€äº›éå¸¸é‡è¦çš„å†…å®¹æˆ–è€…è­¦å‘Šä¿¡æ¯ã€‚

```kotlin
class MainActivity : AppCompatActivity(), View.OnClickListener {
    ...
    override fun onClick(v: View?) {
        when (v?.id) {
            R.id.button -> {
                AlertDialog.Builder(this).apply {
                    setTitle("This is Dialog")
                    setMessage("Something important.")
                    setCancelable(false)
                    setPositiveButton("OK") { dialog, which -> }
                    setNegativeButton("Cancel") { dialog, which -> }
                    show()
                }
            }
        }
    }
}
```

#### ListView

##### ç®€å•ç”¨æ³•

```xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="match_parent">
    <ListView
              android:id="@+id/listView"
              android:layout_width="match_parent"
              android:layout_height="match_parent" />
</LinearLayout>
```

- é›†åˆä¸­çš„æ•°æ®æ˜¯æ— æ³•ç›´æ¥ä¼ é€’ç»™ListViewçš„ï¼Œéœ€è¦å€ŸåŠ©é€‚é…å™¨æ¥å®Œæˆã€‚
- Android ä¸­æä¾›äº†å¾ˆå¤šé€‚é…å™¨çš„å®ç°ç±»ï¼Œå…¶ä¸­æœ€å¥½ç”¨çš„å°±æ˜¯ArrayAdapterã€‚
  - å®ƒå¯ä»¥é€šè¿‡æ³›å‹æ¥æŒ‡å®šè¦é€‚é…çš„æ•°æ®ç±»å‹ï¼Œç„¶ååœ¨æ„é€ å‡½æ•°ä¸­æŠŠè¦é€‚é…çš„æ•°æ®ä¼ å…¥ã€‚
  - ArrayAdapteræœ‰å¤šä¸ªæ„é€ å‡½æ•°çš„é‡è½½ï¼Œåº”è¯¥æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©æœ€åˆé€‚çš„ä¸€ç§ã€‚
  - ç”±äºæˆ‘ä»¬è¿™é‡Œæä¾›çš„æ•°æ®éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå› æ­¤å°†ArrayAdapterçš„æ³›å‹æŒ‡å®šä¸º`String`ï¼Œç„¶ååœ¨ArrayAdapterçš„æ„é€ å‡½æ•°ä¸­ä¾æ¬¡ä¼ å…¥Activity çš„å®ä¾‹ã€ListViewå­é¡¹å¸ƒå±€çš„idï¼Œä»¥åŠæ•°æ®æºã€‚
  - `android.R.layout.simple_list_item_1`ä½œä¸ºListViewå­é¡¹å¸ƒå±€çš„idï¼Œè¿™æ˜¯ä¸€ä¸ª Androidå†…ç½®çš„å¸ƒå±€æ–‡ä»¶ï¼Œé‡Œé¢åªæœ‰ä¸€ä¸ªTextViewï¼Œå¯ç”¨äºç®€å•åœ°æ˜¾ç¤ºä¸€æ®µæ–‡æœ¬ã€‚
- æœ€åï¼Œè¿˜éœ€è¦è°ƒç”¨ListViewçš„`setAdapter()`æ–¹æ³•ï¼Œå°†æ„å»ºå¥½çš„é€‚é…å™¨å¯¹è±¡ä¼ é€’è¿›å»ï¼Œè¿™æ ·ListViewå’Œæ•°æ®ä¹‹é—´çš„å…³è”å°±å»ºç«‹å®Œæˆäº†ã€‚

```kotlin
class MainActivity : AppCompatActivity() {
    private val data = listOf("Apple", "Banana", "Orange", "Watermelon", "Pear", "Grape", "Pineapple", "Strawberry", "Cherry", "Mango", "Apple", "Banana", "Orange", "Watermelon", "Pear", "Grape", "Pineapple", "Strawberry", "Cherry", "Mango")
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        val adapter = ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,data)
        listView.adapter = adapter
    }
}
```

##### å®šåˆ¶ListViewçš„èŠ‚é¢

ä¸ºListViewçš„å­é¡¹æŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰çš„å¸ƒå±€ï¼š

```xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="60dp">
    <ImageView
               android:id="@+id/fruitImage"
               android:layout_width="40dp"
               android:layout_height="40dp"
               android:layout_gravity="center_vertical"
               android:layout_marginLeft="10dp"/>
    <TextView
              android:id="@+id/fruitName"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_gravity="center_vertical"
              android:layout_marginLeft="10dp" />
</LinearLayout>
```

å®šä¹‰ä¸€ä¸ªå®ä½“ç±»ï¼Œä½œä¸ºListViewé€‚é…å™¨çš„é€‚é…ç±»å‹ã€‚

```kotlin
class Fruit(val name:String, val imageId: Int)
```

åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„é€‚é…å™¨ï¼Œè¿™ä¸ªé€‚é…å™¨ç»§æ‰¿è‡ªArrayAdapterï¼Œå¹¶å°†æ³›å‹æŒ‡å®šä¸ºFruitç±»ã€‚

```kotlin
class FruitAdapter(activity: Activity, val resourceId: Int, data: List<Fruit>) :
ArrayAdapter<Fruit>(activity, resourceId, data) {
    override fun getView(position: Int, convertView: View?, parent: ViewGroup): View {
        val view = LayoutInflater.from(context).inflate(resourceId, parent, false)
        val fruitImage: ImageView = view.findViewById(R.id.fruitImage)
        val fruitName: TextView = view.findViewById(R.id.fruitName)
        val fruit = getItem(position) // è·å–å½“å‰é¡¹çš„Fruitå®ä¾‹
        if (fruit != null) {
            fruitImage.setImageResource(fruit.imageId)
            fruitName.text = fruit.name
        }
        return view
    }
}
```

æœ€åä¿®æ”¹MainActivityä¸­çš„ä»£ç ï¼š

```kotlin
class MainActivity : AppCompatActivity() {
    private val fruitList = ArrayList<Fruit>()
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        initFruits() // åˆå§‹åŒ–æ°´æœæ•°æ®
        val adapter = FruitAdapter(this, R.layout.fruit_item, fruitList)
        listView.adapter = adapter
    }
    private fun initFruits() {
        repeat(2) {
            fruitList.add(Fruit("Apple", R.drawable.apple_pic))
            fruitList.add(Fruit("Banana", R.drawable.banana_pic))
            fruitList.add(Fruit("Orange", R.drawable.orange_pic))
            fruitList.add(Fruit("Watermelon", R.drawable.watermelon_pic))
            fruitList.add(Fruit("Pear", R.drawable.pear_pic))
            fruitList.add(Fruit("Grape", R.drawable.grape_pic))
            fruitList.add(Fruit("Pineapple", R.drawable.pineapple_pic))
            fruitList.add(Fruit("Strawberry", R.drawable.strawberry_pic))
            fruitList.add(Fruit("Cherry", R.drawable.cherry_pic))
            fruitList.add(Fruit("Mango", R.drawable.mango_pic))
        }
    }
}
```

ä¸ºListViewçš„æ¯ä¸€ä¸ªå­é¡¹æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼š

```kotlin
class MainActivity : AppCompatActivity() {
    private val fruitList = ArrayList<Fruit>()
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        initFruits() // åˆå§‹åŒ–æ°´æœæ•°æ®
        val adapter = FruitAdapter(this, R.layout.fruit_item, fruitList)
        listView.adapter = adapter
        listView.setOnItemClickListener { parent, view, position, id ->
			val fruit = fruitList[position]
			Toast.makeText(this, fruit.name, Toast.LENGTH_SHORT).show()
		}
    }
    ...
}
```

##### ä¼˜åŒ–ListViewçš„è¿è¡Œæ•ˆç‡

åœ¨FruitAdapterçš„getView()æ–¹æ³•ä¸­ï¼Œæ¯æ¬¡éƒ½å°†å¸ƒå±€é‡æ–°åŠ è½½äº†ä¸€éï¼Œå½“ListViewå¿«é€Ÿæ»šåŠ¨çš„æ—¶å€™ï¼Œè¿™å°±ä¼šæˆä¸ºæ€§èƒ½çš„ç“¶é¢ˆã€‚

`getView()`æ–¹æ³•ä¸­è¿˜æœ‰ä¸€ä¸ª`convertView`å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°ç”¨äºå°†ä¹‹å‰åŠ è½½å¥½çš„å¸ƒå±€è¿›è¡Œç¼“å­˜ï¼Œä»¥ä¾¿ä¹‹åè¿›è¡Œé‡ç”¨ï¼Œå¯ä»¥å€ŸåŠ©è¿™ä¸ªå‚æ•°æ¥è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€‚

```kotlin
class FruitAdapter(activity: Activity, val resourceId: Int, data: List<Fruit>) :
ArrayAdapter<Fruit>(activity, resourceId, data) {
    override fun getView(position: Int, convertView: View?, parent: ViewGroup): View {
        val view: View
        if (convertView == null) {
            view = LayoutInflater.from(context).inflate(resourceId, parent, false)
        } else {
            view = convertView
        }
        val fruitImage: ImageView = view.findViewById(R.id.fruitImage)
        val fruitName: TextView = view.findViewById(R.id.fruitName)
        val fruit = getItem(position) // è·å–å½“å‰é¡¹çš„Fruitå®ä¾‹
        if (fruit != null) {
            fruitImage.setImageResource(fruit.imageId)
            fruitName.text = fruit.name
        }
        return view
    }
}
```

æ¯æ¬¡åœ¨`getView()`æ–¹æ³•ä¸­ä»ç„¶ä¼šè°ƒç”¨`View`çš„`findViewById()`æ–¹æ³•æ¥è·å–ä¸€æ¬¡æ§ä»¶çš„å®ä¾‹ï¼Œå¯ä»¥å€ŸåŠ©ä¸€ä¸ª`ViewHolder`æ¥å¯¹è¿™éƒ¨åˆ†æ€§èƒ½è¿›è¡Œä¼˜åŒ–ï¼Œä¿®æ”¹`FruitAdapter`ä¸­çš„ä»£ç ã€‚

```kotlin
class FruitAdapter(activity: Activity, val resourceId: Int, data: List<Fruit>) :
ArrayAdapter<Fruit>(activity, resourceId, data) {
    inner class ViewHolder(val fruitImage: ImageView, val fruitName: TextView)
    override fun getView(position: Int, convertView: View?, parent: ViewGroup): View {
        val view: View
        val viewHolder: ViewHolder
        if (convertView == null) {
            view = LayoutInflater.from(context).inflate(resourceId, parent, false)
            val fruitImage: ImageView = view.findViewById(R.id.fruitImage)
            val fruitName: TextView = view.findViewById(R.id.fruitName)
            viewHolder = ViewHolder(fruitImage, fruitName)
            view.tag = viewHolder
        } else {
            view = convertView
            viewHolder = view.tag as ViewHolder
        }
        val fruit = getItem(position) // è·å–å½“å‰é¡¹çš„Fruitå®ä¾‹
        if (fruit != null) {
            viewHolder.fruitImage.setImageResource(fruit.imageId)
            viewHolder.fruitName.text = fruit.name
        }
        return view
    }
}
```

#### RecyclerView

##### åŸºæœ¬ç”¨æ³•

RecyclerViewå±äºæ–°å¢æ§ä»¶ï¼ŒGoogleå°†RecyclerViewæ§ä»¶å®šä¹‰åœ¨äº†AndroidXå½“ä¸­ï¼Œåªéœ€è¦åœ¨é¡¹ç›®çš„`build.gradle`ä¸­æ·»åŠ RecyclerViewåº“çš„ä¾èµ–ï¼Œå°±èƒ½ä¿è¯åœ¨æ‰€æœ‰Androidç³»ç»Ÿç‰ˆæœ¬ä¸Šéƒ½å¯ä»¥ä½¿ç”¨RecyclerViewæ§ä»¶äº†ã€‚

```
dependencies {
...
implementation 'androidx.recyclerview:recyclerview:1.0.0'
...
}
```

Layoutæ–‡ä»¶ä¸­ï¼š

```xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="match_parent">
    <!-- RecyclerViewä¸æ˜¯å†…ç½®åœ¨ç³»ç»ŸSDKå½“ä¸­çš„ï¼Œéœ€è¦æŠŠå®Œæ•´çš„åŒ…è·¯å¾„å†™å‡ºæ¥ -->
    <androidx.recyclerview.widget.RecyclerView
		android:id="@+id/recyclerView"
		android:layout_width="match_parent"
		android:layout_height="match_parent" />
</LinearLayout>
```

ä¸ºRecyclerViewå‡†å¤‡ä¸€ä¸ªé€‚é…å™¨ï¼š

```kotlin
class FruitAdapter(val fruitList: List<Fruit>) :
		RecyclerView.Adapter<FruitAdapter.ViewHolder>() {
    inner class ViewHolder(view: View) : RecyclerView.ViewHolder(view) {
        val fruitImage: ImageView = view.findViewById(R.id.fruitImage)
        val fruitName: TextView = view.findViewById(R.id.fruitName)
    }
    // ç”¨äºåˆ›å»ºViewHolderå®ä¾‹
    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
        val view = LayoutInflater.from(parent.context)
        .inflate(R.layout.fruit_item, parent, false)
        return ViewHolder(view)
    }
    // onBindViewHolder()æ–¹æ³•ç”¨äºå¯¹RecyclerViewå­é¡¹çš„æ•°æ®è¿›è¡Œèµ‹å€¼
    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        val fruit = fruitList[position]
        holder.fruitImage.setImageResource(fruit.imageId)
        holder.fruitName.text = fruit.name
    }
    override fun getItemCount() = fruitList.size
}
```

ä¿®æ”¹MainActivityï¼š

```kotlin
class MainActivity : AppCompatActivity() {
    private val fruitList = ArrayList<Fruit>()
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        initFruits() // åˆå§‹åŒ–æ°´æœæ•°æ®
        // LayoutManagerç”¨äºæŒ‡å®šRecyclerViewçš„å¸ƒå±€æ–¹å¼
        // è¿™é‡Œä½¿ç”¨çš„LinearLayoutManageræ˜¯çº¿æ€§å¸ƒå±€çš„æ„æ€
        val layoutManager = LinearLayoutManager(this)
        recyclerView.layoutManager = layoutManager
        val adapter = FruitAdapter(fruitList)
        recyclerView.adapter = adapter
    }
    private fun initFruits() {
        repeat(2) {
            fruitList.add(Fruit("Apple", R.drawable.apple_pic))
            fruitList.add(Fruit("Banana", R.drawable.banana_pic))
            ...
        }
    }
}
```

##### å®ç°æ¨ªå‘æ»šåŠ¨å’Œç€‘å¸ƒæµå¸ƒå±€

RecyclerViewå°†å¸ƒå±€æ’åˆ—äº¤ç»™äº†LayoutManagerã€‚

###### æ¨ªå‘å¸ƒå±€

è¦å®ç°æ¨ªå‘æ»šåŠ¨ï¼Œåº”è¯¥æŠŠfruit_itemé‡Œçš„å…ƒç´ æ”¹æˆå‚ç›´æ’åˆ—æ‰æ¯”è¾ƒåˆç†ï¼Œä¿®æ”¹fruit_item.xmlä¸­çš„ä»£ç ï¼š

```xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="80dp"
              android:layout_height="wrap_content">
    <ImageView
               android:id="@+id/fruitImage"
               android:layout_width="40dp"
               android:layout_height="40dp"
               android:layout_gravity="center_horizontal"
               android:layout_marginTop="10dp" />
    <TextView
              android:id="@+id/fruitName"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_gravity="center_horizontal"
              android:layout_marginTop="10dp" />
</LinearLayout>
```

ä¿®æ”¹MainActivityï¼š

```kotlin
class MainActivity : AppCompatActivity() {
    private val fruitList = ArrayList<Fruit>()
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        initFruits() // åˆå§‹åŒ–æ°´æœæ•°æ®
        val layoutManager = LinearLayoutManager(this)
        layoutManager.orientation = LinearLayoutManager.HORIZONTAL // *
        recyclerView.layoutManager = layoutManager
        val adapter = FruitAdapter(fruitList)
        recyclerView.adapter = adapter
    }
    ...
}
```

###### ç€‘å¸ƒæµå¸ƒå±€

```xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:layout_margin="5dp">
    <ImageView
               android:id="@+id/fruitImage"
               android:layout_width="40dp"
               android:layout_height="40dp"
               android:layout_gravity="center_horizontal"
               android:layout_marginTop="10dp" />
    <TextView
              android:id="@+id/fruitName"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_gravity="left"
              android:layout_marginTop="10dp" />
</LinearLayout>
```

```kotlin
class MainActivity : AppCompatActivity() {
    private val fruitList = ArrayList<Fruit>()
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        initFruits() // åˆå§‹åŒ–æ°´æœæ•°æ®
        val layoutManager = StaggeredGridLayoutManager(3,StaggeredGridLayoutManager.VERTICAL)
        recyclerView.layoutManager = layoutManager
        val adapter = FruitAdapter(fruitList)
        recyclerView.adapter = adapter
    }
    private fun initFruits() {
        repeat(2) {
            www.blogss.cn
            fruitList.add(Fruit(getRandomLengthString("Apple"),
                                R.drawable.apple_pic))
            fruitList.add(Fruit(getRandomLengthString("Banana"),
                                R.drawable.banana_pic))
            ......
        }
    }
    private fun getRandomLengthString(str: String): String {
        val n = (1..20).random()
        val builder = StringBuilder()
        repeat(n) {
            builder.append(str)
        }
        return builder.toString()
    }
```

##### ç‚¹å‡»äº‹ä»¶

RecyclerViewå¹¶æ²¡æœ‰æä¾›ç±»ä¼¼äº`setOnItemClickListener()`è¿™æ ·çš„æ³¨å†Œç›‘å¬å™¨æ–¹æ³•ï¼Œè€Œæ˜¯éœ€è¦ç»™å­é¡¹å…·ä½“çš„Viewå»æ³¨å†Œç‚¹å‡»äº‹ä»¶ã€‚

ä¿®æ”¹FruitAdapterï¼š

```kotlin
class FruitAdapter(val fruitList: List<Fruit>) :
RecyclerView.Adapter<FruitAdapter.ViewHolder>() {
    ...
    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
        val view = LayoutInflater.from(parent.context)
        .inflate(R.layout.fruit_item, parent, false)
        val viewHolder = ViewHolder(view)
        viewHolder.itemView.setOnClickListener {
            val position = viewHolder.adapterPosition
            val fruit = fruitList[position]
            Toast.makeText(parent.context, "you clicked view ${fruit.name}", Toast.LENGTH_SHORT).show()
        }
        viewHolder.fruitImage.setOnClickListener {
            val position = viewHolder.adapterPosition
            val fruit = fruitList[position]
            Toast.makeText(parent.context, "you clicked image ${fruit.name}", Toast.LENGTH_SHORT).show()
        }
        return viewHolder
    }
    ...
}

```

### åŸºæœ¬å¸ƒå±€

#### LinearLayout

LinearLayoutåˆç§°ä½œçº¿æ€§å¸ƒå±€ï¼Œè¿™ä¸ªå¸ƒå±€ä¼šå°†å®ƒæ‰€åŒ…å«çš„æ§ä»¶åœ¨çº¿æ€§æ–¹å‘ä¸Šä¾æ¬¡æ’åˆ—ã€‚

```Xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="horizontal"  # åœ¨æ­¤ä¿®æ”¹çº¿æ€§æ–¹å‘
              android:layout_width="match_parent"
              android:layout_height="match_parent">
    ...
</LinearLayout>
```

å¦‚LinearLayoutçš„æ’åˆ—æ–¹å‘æ˜¯horizontalï¼Œå†…éƒ¨çš„æ§ä»¶å°±ç»å¯¹ä¸èƒ½å°†å®½åº¦æŒ‡å®šä¸º`match_parent`ï¼Œå¦åˆ™ï¼Œå•ç‹¬ä¸€ä¸ªæ§ä»¶å°±ä¼šå°†æ•´ä¸ªæ°´å¹³æ–¹å‘å æ»¡ï¼Œå…¶ä»–çš„æ§ä»¶å°±æ²¡æœ‰å¯æ”¾ç½®çš„ä½ç½®äº†ã€‚åŒæ ·çš„é“ç†ï¼Œå¦‚æœLinearLayoutçš„æ’åˆ—æ–¹å‘æ˜¯verticalï¼Œå†…éƒ¨çš„æ§ä»¶å°±ä¸èƒ½å°†é«˜ åº¦æŒ‡å®šä¸º`match_parent`ã€‚

- `android:gravity`ç”¨äºæŒ‡å®šæ–‡å­—åœ¨æ§ä»¶ä¸­çš„å¯¹é½æ–¹å¼ã€‚
- `android:layout_gravity`ç”¨äºæŒ‡å®šæ§ä»¶åœ¨å¸ƒå±€ä¸­çš„å¯¹é½æ–¹å¼ã€‚
  - `android:layout_gravity`çš„å¯é€‰å€¼å’Œ`android:gravity`å·®ä¸å¤šã€‚
    - `topã€center_verticalã€bottom`
  - éœ€è¦æ³¨æ„ï¼Œå½“LinearLayoutçš„æ’åˆ—æ–¹å‘æ˜¯horizontalæ—¶ï¼Œåªæœ‰å‚ç›´æ–¹å‘ä¸Šçš„å¯¹é½æ–¹å¼æ‰ä¼šç”Ÿæ•ˆã€‚å› ä¸ºæ­¤æ—¶æ°´å¹³æ–¹å‘ä¸Šçš„é•¿åº¦æ˜¯ä¸å›ºå®šçš„ï¼Œæ¯æ·»åŠ ä¸€ä¸ªæ§ä»¶ï¼Œæ°´å¹³æ–¹å‘ä¸Šçš„é•¿åº¦éƒ½ä¼šæ”¹å˜ï¼Œå› è€Œæ— æ³•æŒ‡å®šè¯¥æ–¹å‘ä¸Šçš„å¯¹é½æ–¹å¼ã€‚
- `android:layout_weight`ä½¿ç”¨æ¯”ä¾‹çš„æ–¹å¼æ¥æŒ‡å®šæ§ä»¶çš„å¤§å°ã€‚
  - ä½¿ç”¨äº†`android:layout_weight`å±æ€§ï¼Œæ­¤æ—¶æ§ä»¶çš„å®½åº¦å°±ä¸å†ç”±`android:layout_width`æ¥å†³å®šã€‚
  - ç³»ç»Ÿä¼šå…ˆæŠŠLinearLayoutä¸‹æ‰€æœ‰æ§ä»¶æŒ‡å®šçš„`layout_weight`å€¼ç›¸åŠ ï¼Œå¾—åˆ°ä¸€ä¸ªæ€»å€¼ï¼Œç„¶åæ¯ä¸ªæ§ä»¶æ‰€å å¤§å°çš„æ¯”ä¾‹å°±æ˜¯ç”¨è¯¥æ§ä»¶çš„l`ayout_weight`å€¼é™¤ä»¥åˆšæ‰ç®—å‡ºçš„æ€»å€¼ã€‚

#### RelativeLayout

RelativeLayoutåˆç§°ä½œç›¸å¯¹å¸ƒå±€ï¼Œå¯ä»¥é€šè¿‡ç›¸å¯¹å®šä½çš„æ–¹å¼è®©æ§ä»¶å‡ºç°åœ¨å¸ƒå±€çš„ä»»ä½•ä½ ç½®ã€‚

ç›¸å¯¹äºçˆ¶å¸ƒå±€å®šä½ï¼š

```xml
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="match_parent"
                android:layout_height="match_parent">
    <!-- å·¦ä¸Šè§’å¯¹é½ -->
    <Button
            android:id="@+id/button1"
            www.blogss.cn
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:text="Button 1" />
    <!-- å³ä¸Šè§’å¯¹é½ -->
    <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:text="Button 2" />
    <!-- å±…ä¸­å¯¹é½ -->
    <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:text="Button 3" />
    <!-- å·¦ä¸‹è§’å¯¹é½ -->
    <Button
            android:id="@+id/button4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:text="Button 4" />
    <!-- å³ä¸‹è§’å¯¹é½ -->
    <Button
            android:id="@+id/button5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:text="Button 5" />
</RelativeLayout>
```

ç›¸å¯¹äºæ§ä»¶å®šä½ï¼š

```xml
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="match_parent"
                android:layout_height="match_parent">
    <!-- å±…ä¸­ -->
    <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:text="Button 3" />
    <!-- button3 å·¦ä¸Šè§’ -->
    <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@id/button3"
            android:layout_toLeftOf="@id/button3"
            android:text="Button 1" />
    <!-- button3 å³ä¸Šè§’ -->
    <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@id/button3"
            android:layout_toRightOf="@id/button3"
            android:text="Button 2" />
    <!-- button3 å·¦ä¸‹è§’ -->
    <Button
            android:id="@+id/button4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/button3"
            android:layout_toLeftOf="@id/button3"
            android:text="Button 4" />
    <!-- button3 å³ä¸‹è§’ -->
    <Button
            android:id="@+id/button5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/button3"
            android:layout_toRightOf="@id/button3"
            android:text="Button 5" />
</RelativeLayout>
```

- å¦å¤–ä¸€ç»„ç›¸å¯¹äºæ§ä»¶è¿›è¡Œå®šä½çš„å±æ€§ï¼š
  - `android:layout_alignLeft`è¡¨ç¤ºè®©ä¸€ä¸ªæ§ä»¶çš„å·¦è¾¹ç¼˜å’Œå¦ä¸€ä¸ªæ§ä»¶çš„å·¦è¾¹ç¼˜å¯¹é½
  - `android:layout_alignRight`è¡¨ç¤ºè®©ä¸€ä¸ªæ§ä»¶çš„å³è¾¹ç¼˜å’Œå¦ä¸€ä¸ªæ§ä»¶çš„å³è¾¹ç¼˜å¯¹é½
  - `android:layout_alignTop`
  - `android:layout_alignBottom`

#### FrameLayout

FrameLayoutåˆç§°ä½œå¸§å¸ƒå±€ï¼Œæ‰€æœ‰çš„æ§ä»¶éƒ½ä¼šé»˜è®¤æ‘†æ”¾åœ¨å¸ƒå±€çš„å·¦ä¸Šè§’ã€‚



### è‡ªå®šä¹‰æ§ä»¶

#### å¢åŠ ä¸€ä¸ªæ ‡é¢˜æ 

layoutç›®å½•ä¸‹æ–°å¢titleï¼š

```xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:background="@drawable/title_bg">
    <Button
            android:id="@+id/titleBack"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_margin="5dp"
            android:background="@drawable/back_bg"
            android:text="Back"
            android:textColor="#fff" />
    <TextView
              android:id="@+id/titleText"
              android:layout_width="0dp"
              android:layout_height="wrap_content"
              android:layout_gravity="center"
              android:layout_weight="1"
              android:gravity="center"
              android:text="Title Text"
              android:textColor="#fff"
              android:textSize="24sp" />
    <Button
            android:id="@+id/titleEdit"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_margin="5dp"
            android:background="@drawable/edit_bg"
            android:text="Edit"
            android:textColor="#fff" />
</LinearLayout>
```

å³å¯åœ¨å…¶ä»–Acitivityä¸­ä½¿ç”¨ï¼š

```xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="match_parent" >
    <include layout="@layout/title" />
</LinearLayout
```

ä½¿è‡ªå®šä¹‰æ§ä»¶å¸ƒå±€ä¸­æœ‰ä¸€äº›æ§ä»¶è¦æ±‚èƒ½å¤Ÿå“åº”äº‹ä»¶ï¼š

```kotlin
class TitleLayout(context: Context, attrs: AttributeSet) : LinearLayout(context, attrs) {
    init {
        LayoutInflater.from(context).inflate(R.layout.title, this)
        titleBack.setOnClickListener {
            val activity = context as Activity
            activity.finish()
        }
        titleEdit.setOnClickListener {
            Toast.makeText(context, "You clicked Edit button", Toast.LENGTH_SHORT).show()
        }
    }
}
```

å³å¯åœ¨å¸ƒå±€æ–‡ä»¶ä¸­æ·»åŠ è¿™ä¸ªè‡ªå®šä¹‰æ§ä»¶ï¼š

```xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
	android:layout_width="match_parent"
	android:layout_height="match_parent" >
    <com.example.uicustomviews.TitleLayout
		android:layout_width="match_parent"
		android:layout_height="wrap_content" />
</LinearLayout>
```
